<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>LDES server | Technical Documentation</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="LDES server" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="LDES server LDIO Pipeline see reference guide Apache Nifi Component Name: `` see Apache Nifi reference guide The Linked Data Event Stream (LDES) server is a configurable component that can be used to ingest, store, and (re-)publish one or multiple Linked Data Event Stream(s). The open-source LDES server is built in the context of the VSDS project to exchange (Open) Data easily. The server can be configured to meet the organisation’s specific needs. Functionalities include retention policy, fragmentation, deletion, create a snapshot and pagination for managing and processing large amounts of data more efficiently and ensuring the efficient use of storage. The LDES server is available as on open-source building block on GitHub Setting up the LDES Server during startup process Ingesting sources (HTTP in) The LDES server is able to receive data via HTTP ingestion. Specifically, the server expects a single object (member) to be sent as input via a POST request. If the dataset still contains state objects, each of these must first be converted to a version object before being ingested in the server. Once the objects in the dataset are LDES-compliant members (whether or not after conversion to a version object) and the LDES member has been added to the LDES server, the server can effortlessly publish the LDES member as part of the LDES. More information on the HTTP ingestion can be found here. Example HTTP Ingest-Fetch Configuration: server.port: { http-port } ldes: collection-name: { short name of the collection, cannot contain characters that are used for url interpretation, e.g.’ $’, ‘=’ or ‘&amp;’, } host-name: { hostname of LDES Server } member-type: { Defines which syntax type is used to define the member id e.g. “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”, } timestamp-path: { SHACL property path to the timestamp when the version object entered the event stream., } version-of: { SHACL property path to the non-versioned identifier of the entity. } validation: shape: { URI to defined shape } enabled: { Enables/Disables shacl validation on ingested members } rest: max-age: { time in seconds that a mutable fragment can be considered up-to-date, default when omitted: 60, } max-age-immutable: { time in seconds that an immutable fragment should not be refreshed, default when omitted: 604800, } SHACL The LDES specification prescribes that each LDES must link to a SHACL shape, providing a machine-readable definition of the members in the collection. If a SHACL shape was provided on startup, the LDES server reads it before the ingestion process starts and the SHACL shape is used to validate the ingested members. Only valid members are ingested in the LDES server. When starting the server, it is possible to provide a SHACL shape via through an RDF file. At last, the SHACL shape is also published as part of the LDES on the Web. SHACL stands for Shapes Constraint Language and is used to define a set of constraints which are used to verify to conformity of RDF data with these constraints. The SHACL shape specifies the expected properties of an LDES members and the constraints that must be followed to ensure the LDES member adheres to the expected structure and semantics. It defines properties such as required properties, allowed property values, and the data types expected for the properties. More information on how to provide an RDF file, containing a SHACL shape, to the LDES server can be found here. Fragmentation To reduce the volume of data that consumers need to replicate or to speed up certain queries, the LDES server can be configured to create several fragmentations. Fragmentations are similar to indexes in databases but then published on the Web. The RDF predicate on which the fragmentation must be applied is defined through configuration. The fragmenting of a Linked Data Event Stream (LDES) is a crucial technique for managing and processing large amounts of data more efficiently. There are three main methods of fragmentation: geospatial, time-based, and substring fragmentation. Partitioning When applying partitioning, the LDES server will create fragments based on the order of arrival of the LDES member, and is a linear fragmentation. This fragmentation is considered the most basic and default fragmentation because it stands for the exact reason the LDES specification was created: replication and synchronising with a dataset. The members arriving on the LDES server are added to the first page, while the latest members are always included on the latest page. The expected parameter to apply a partioning is a member limit, indicating the amount of members that can be added to each page before creating a new page. name: “pagination” config: memberLimit: { Mandatory: member limit &gt; 0 } Algorithm The fragment to which the member should be added is determined. The currently open fragment is retrieved from the database. If this fragment contains members equal to or exceeding the member limit or no fragment can be found, a new fragment is created instead. If a new fragment is created, the following steps are taken. The new fragment becomes the new open fragment and the previous fragment becomes immutable1. This newly created fragment and the previous fragment are then linked with each other by 2 generic relationships1. The pagenumber of the new fragment is determined based on the old fragment or is set to 1 in case of the first fragment. 1 In case of the first fragment, a previous fragment does not exist so these steps are skipped. Example properties name: &quot;pagination&quot; config: memberLimit: 10 Substring fragmentation Substring fragmentation is currently no longer supported as a fragmentation option in the LDES server. Time-based fragmentation Time-based fragmentation has not yet been implemented. Example of a time-based fragmentation configuration file name: “timebased” config: memberLimit: { member limit &gt; 0 } Algorithm This fragmentiser will create an initial fragment with the current timestamp when processing a member. Members are added to the fragment until the member limit is reached. When the fragment member limit is reached, a next fragment is created with a new current timestamp. Reasons for deprecating this fragmentiser: This fragmentiser follows the algorithm of pagination but without the semantics. For a correct timebased fragmentation, members of the fragment should be checked and their value for a given property should be used to create the correct relations. This is not the case, and there is currently no demand to have this implemented. Geospatial fragmentation Consider the scenario where the address registry is published as an LDES that using partitioning. In such a case, data consumers are required to replicate the entire linear set of fragments, despite only being interested in a smaller subset of the dataset. For instance, the city of Brussels may only require addresses within its geographical region and is not interested in other addresses. However, with the partitioned LDES, they would need to iterate through all the fragments and filter the LDES members (address version objects) on the client-side. By utilising geospatial fragmentation, the data can be divided into smaller pieces (tiles) based on geographical location. This facilitates filtering on the fragment level (tiles) and allows for processing and analysis of data within specific geospatial tiles. The geospatial fragmentation supported by the LDES server is based on the “Slippy Maps” algorithm. The fragmentation expects a zoom level parameter which is used by the algorithm to divide the “world” into tiles. The number of tiles if (2^{2n}) (where n = zoom level). The second expected parameter is an RDF predicate, indicating on which property of the LDES member the fragmentation should be applied. More information about the algorithm used to apply a geospatial fragmentation can be found here. The required configuration for this fragmentation is: RDF predicate on which the fragmentation should be based Zoom level Example of geospatial fragmentation configuration file name: “geospatial” config: maxZoomLevel: { Required zoom level } fragmenterProperty: { Defines which property will be used for bucketizing } Algorithm The fragmentationObjects of the member are determined We filter the RDF statements where the predicate matches the fragmenterProperty If an optional regex is provided through the fragmenterSubjectFilter property, we filter on subjects that match this regex. We select all the object that pass the above filters. A bucket of tiles is created using the coordinates and provided zoomLevel. This is done using the Slippy Map algorithm. The tiles are iterated. The member is added to every tile, or sub-fragmentations of these tiles1. Taking into account: A new fragment is created if no fragment exists for the given tile. There is no memberLimit or max size for a fragment. They do not become immutable. The member is added to every related fragment 1 If the geospatial fragmentation is not the lowest fragmentation level, the member is not added to the tile but to a subfragment on this tile. This case is included in the example below. Example Example properties: name: &quot;geospatial&quot; config: maxZoomLevel: 15 fragmenterProperty: &quot;http://www.opengis.net/ont/geosparql#asWKT&quot; With following example input: @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix ns0: &lt;http://semweb.mmlab.be/ns/linkedconnections#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix ns1: &lt;http://vocab.gtfs.org/terms#&gt; . @prefix prov: &lt;http://www.w3.org/ns/prov#&gt; . @prefix ns2: &lt;http://www.opengis.net/ont/geosparql#&gt; . @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; . @prefix geo: &lt;http://www.w3.org/2003/01/geo/wgs84_pos#&gt; . &lt;http://njh.me/original-id#2022-09-28T17:11:28.520Z&gt; dc:isVersionOf &lt;http://njh.me/original-id&gt; ; ns0:arrivalStop &lt;http://example.org/stops/402161&gt; ; ns0:arrivalTime &quot;2022-09-28T07:14:00.000Z&quot;^^xsd:dateTime ; ns0:departureStop &lt;http://example.org/stops/402303&gt; ; ns0:departureTime &quot;2022-09-28T07:09:00.000Z&quot;^^xsd:dateTime ; ns1:dropOffType ns1:Regular ; ns1:pickupType ns1:Regular ; ns1:route &lt;http://example.org/routes/Hasselt_-_Genk&gt; ; ns1:trip &lt;http://example.org/trips/Hasselt_-_Genk/Genk_-_Hasselt/20220928T0909&gt; ; a ns0:Connection ; prov:generatedAtTime &quot;2022-09-28T17:11:28.520Z&quot;^^xsd:dateTime . &lt;http://example.org/stops/402161&gt; ns2:asWKT &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Brug&quot; ; geo:lat 5.096420e+1 ; geo:long 5.472360e+0 . &lt;http://example.org/stops/402303&gt; ns2:asWKT &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Station perron 11&quot; ; geo:lat 5.096670e+1 ; geo:long 5.496610e+0 . The selected objects would be &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral and &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral When we convert these coordinates to tiles, the bucket of tiles would be: “15/16884/10974” “15/16882/10975” When geospatial fragmentation is the lowest level After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone?tile=15/16884/10974 http://localhost:8080/addresses/by-zone?tile=15/16882/10975 When we have a timebased sub-fragmentation below geospatial fragmentation After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone-and-time?tile=15/16884/10974&amp;generatedAtTime=2023-02-15T10:14:28.262Z http://localhost:8080/addresses/by-zone-and-time?tile=15/16882/10975&amp;generatedAtTime=2023-02-15T10:14:28.262Z Note that the generatedAtTime=2023-02-15T10:14:28.262Z is an example, this can be any other fragmentation. Combining geospatial fragmentation and partioning The LDES server typically adds an LDES member to the “lowest” possible fragment, which in the case of geospatial fragmentation, would be the fragment representing the corresponding geospatial tile. However, some fragments/tiles may have many members, while others may have none. In the worst-case scenario, all members may be added to one geospatial tile/fragment, leading to an enormous fragment. Combining geospatial fragmentation with partitioning can be a useful approach to mitigate this issue. Then partitioning is applied within every geospatial tile, resulting in a set of linear fragments for every geospatial tile. Doing so, all members can still end up in the same geospatial tile, but now clients have a set of linear fragments to iterate through instead of one enormous fragment. More detailed information is available in the example below. Retention policy A retention policydetermines how long data will be kept and stored. Its purpose is to ensure the efficient use of storage resources by controlling data growth over time. Setting a retention policy per view to minimise storage fill-up is possible. Implementing a retention policy helps organisations maintain control over their data growth and ensure that storage resources are used optimally. The policy specifies the maximum duration that data should be kept. Time based retention policy The time-based retention policy can be configured using the ISO 8601 duration format. This time-based policy ensures that data is automatically deleted after a specified period, freeing up valuable storage space for new data. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:time-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT5M&quot;^^xsd:duration ; ] ; ] . duration: “PT5M” As an example, the time-based retention configuration example above is set up to ensure that data is automatically deleted after 5 minutes (PT5M). Point-in-time retention policy The point in time retention policy of the Linked Data Event Stream (LDES) only preserves the members created after a specific moment. In this way, only the members made after a given point in time retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:point-in-time-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:PointInTimePolicy ; ldes:pointInTime &quot;2023-04-12T00:00:00&quot;^^xsd:dateTime ] ; ] . Version-based retention policy The version-based retention policy of the system ensures that only the x most recent members of each state object are retained. In this way, only the x most recent members of each state object retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:version-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:LatestVersionSubset; ldes:amount 2 ; ] ; ] . Combine retention policies Time based and Point-in-time retention The integration of Time-based and Point-in-Time retention strategies offers a tactical method for organizations aiming to restrict data volume from a certain Point in Time within a specified time frame. Time-based and Version-based retention This can be used, when the focus is on datasets that are primarily relevant in their ‘latest state’. A practical example is a dataset like a view of an address registry, where only the latest, updated addresses are pertinent. Such datasets require a dynamic approach to data retention. Version-based retention: to retain only the most recent version of a data item. Time-based retention: to maintain changes within a specific time frame. Data users can retrieve and maintain the full state of the data, regardless of when they access the data stream, all clients have the same information, leading to uniformity and consistency in data analysis. On the other hand, for data publishers; there’s no need to store all historical data. Only the most recent state plus a short history (e.g., two days) is retained. This approach results in datasets that do not grow exponentially, simplifying management and accessibility. The combination of Version-based and Time-based Retention offers an advanced solution for managing dynamic datasets. This approach is particularly suited for scenarios where only the latest data is relevant, while still retaining a limited historical context. It achieves an optimal balance between accessibility, consistency, and efficiency in both data storage and usage. Hosting the LDES stream SHACL shape SHACL (Shapes Constraint Language) is a language used to validate RDF graphs against a set of conditions provided as shapes and other constructs in an RDF graph. The LDES Server facilitates hosting a SHACL shape describing the members in the LDES. Through configuration, it is possible to reference an existing SHACL shape via an URL or to provide a static file with an RDF description of the SHACL shape. Hosting DCAT metadata DCAT is a standardised RDF vocabulary to describe data catalogues on the Web, allowing easy interoperability between catalogues. Using a standard schema, DCAT enhances discoverability and facilitates federated search across multiple catalogues. The LDES server facilitates hosting DCAT metadata when publishing an LDES. Through configuration, as with the SHACL shape, it is possible to reference an existing DCAT via an URI or to provide a static file containing an RDF description of the DCAT. More information on configuring DCAT on the LDES Server can be found here. Add DCAT configuration for the LDES server @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en . Add DCAT metadata for a LDES @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix dc: &lt;http://purl.org/dc/terms/&gt; . [] a dcat:Dataset ; dc:title &quot;My LDES&quot;@en ; dc:description &quot;LDES for my data collection&quot;@en . Setting up the LDES Server using API Setup of the LDES Server To start a default LDES Server, a few basic steps are needed. Create a ldes-server.yml config file with this basic content mongock: migration-scan-package: VSDS springdoc: swagger-ui: path: /v1/swagger ldes-server: host-name: &quot;http://localhost:8080&quot; management: tracing: enabled: false spring: data: mongodb: database: ldes host: ldes-mongodb port: 27017 auto-index-creation: true Create a local docker-compose.yml file with the content below. version: &quot;3.3&quot; services: ldes-server: container_name: basic_ldes-server image: ghcr.io/informatievlaanderen/ldes-server:20230602200451 environment: - SPRING_CONFIG_LOCATION=/config/ volumes: - ./ldes-server.yml:/config/application.yml:ro ports: - 8080:8080 networks: - ldes depends_on: - ldes-mongodb ldes-mongodb: container_name: quick_start_ldes-mongodb image: mongo:6.0.4 ports: - 27017:27017 networks: - ldes networks: ldes: name: quick_start_network Run docker compose up within the work directory of docker-compose.yml file to start the containers. Setting up metadata for the server Setting up metadata for your LDES Server can be done by posting a RDF object defining a DCAT catalog to /admin/api/v1/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en ; dct:publisher &lt;http://sample.org/company/PublisherX&gt; . &lt;http://sample.org/company/PublisherX&gt; a legal:LegalEntity ; foaf:name &quot;Data Publishing Company&quot; ; legal:legalName &quot;Data Publishing Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;Some full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-publishing-company.com&quot; ] . This can be updated by performing a PUT operation with an updated DCAT catalog on /admin/api/v1/dcat/{catalogID} Finally, to delete the catalog, a DELETE request can be performed at /admin/api/v1/dcat/{catalogID} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a collection Setting up a collection on the LDES Server can be done by posting a RDF object defining a collection to /admin/api/v1/eventstreams @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix custom: &lt;http://example.org/&gt; . @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; . @prefix server: &lt;http://localhost:8080/&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:exampleCollection a ldes:EventStream ; ldes:timestampPath dcterms:created ; ldes:versionOfPath dcterms:isVersionOf ; custom:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; ; custom:hasDefaultView &quot;true&quot;^^xsd:boolean ; tree:shape [ sh:closed &quot;true&quot;; a sh:NodeShape ; ] . This collection can be deleted by performing a DELETE request on /admin/api/v1/eventstreams/{collectionName} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for collection To add metadata to an inserted collection, one can post a DCAT dataset on /admin/api/v1/eventstreams/{collectionName}/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Dataset ; dct:title &quot;My LDES&quot;@en ; dct:title &quot;Mijn LDES&quot;@nl ; dct:description &quot;LDES for my data collection&quot;@en ; dct:description &quot;LDES vir my data-insameling&quot;@af ; dct:creator &lt;http://sample.org/company/MyDataOwner&gt; . &lt;http://sample.org/company/MyDataOwner&gt; a legal:LegalEntity ; foaf:name &quot;Data Company&quot; ; legal:legalName &quot;Data Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;My full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-company.com&quot; ] . To update this entry, a PUT request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat. Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a view Setting up a view on the LDES Server can be done by performing a POST operation with a RDF object defining a collection to /admin/api/v1/eventstreams/{collectionName}/views @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix example: &lt;http://example.org/&gt; . @prefix server: &lt;http://localhost:8080/name1/&gt; . @prefix viewName: &lt;http://localhost:8080/name1/view1/&gt; . viewName:description a &lt;https://w3id.org/tree#ViewDescription&gt; ; ldes:retentionPolicy [ a ldes:retentionPolicy ; example:name &quot;timebased&quot;; example:duration &quot;10&quot; ; ] . server:view1 &lt;https://w3id.org/tree#viewDescription&gt; &lt;http://localhost:8080/name1/view1/description&gt; . Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for view To add metadata to an inserted view, one can perform a PUT operation with a DCAT view description and dataservice on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix host: &lt;http://localhost:8080/&gt; . @prefix server: &lt;http://localhost:8080/collection/&gt; . @prefix viewName: &lt;http://localhost:8080/collection/viewName/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:viewName a tree:Node ; tree:viewDescription viewName:description . viewName:description a dcat:DataService , tree:ViewDescription ; tree:fragmentationStrategy ([ a tree:ExampleFragmentation ; tree:pageSize &quot;100&quot; ; tree:property &quot;example/property&quot; ]) ; dc:description &quot;Geospatial fragmentation for my LDES&quot;@en ; dc:title &quot;My geo-spatial view&quot;@en ; dc:license [ a dc:LicenseDocument ; dc:type [ a skos:Concept ; skos:prefLabel &quot;some public license&quot;@en ] ] ; ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT2M&quot;^^xsd:duration ; ] ; dcat:endpointURL server:viewName ; dcat:servesDataset host:collection ; Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up ACM/IDM The Access and User Management (ACM) and Identity Management (IDM) of the Flemish government are products that allow you to manage the access and identity of data users that consume the published LDES. This ADM/IDM security option through an API gateway, protects LDES Collections and Views from unauthorized access, recognizing the importance of data security. The API gateway serves as a security layer, managing access and applying authentication methods, such as ACM/IDM, reducing the chance of exposing sensitive data to unwanted parties. ACM/IDM verifies the identity and permissions of users and devices. This improved security feature increases the trust and dependability of LDES Server for organizations working in security-sensitive environments. During the ACM/IDM Standard integration process, you will work alongside the ACM/IDM integration team of the Flemish government to follow the standard connection procedure. One of our analysts will guide you through this process via an integration file, where agreements and requirements are documented. This procedure is followed for both new files and modifications to existing files. You can find here more information. OpenAPI swagger UI Via the OpenAPI Specification it becomes possible discover how the LDES server API works, how to configure the LDES server, etc., in a user-friendly manner. As an example, the Swagger API docs can be find here. The Swagger API should look like this:" /> <meta property="og:description" content="LDES server LDIO Pipeline see reference guide Apache Nifi Component Name: `` see Apache Nifi reference guide The Linked Data Event Stream (LDES) server is a configurable component that can be used to ingest, store, and (re-)publish one or multiple Linked Data Event Stream(s). The open-source LDES server is built in the context of the VSDS project to exchange (Open) Data easily. The server can be configured to meet the organisation’s specific needs. Functionalities include retention policy, fragmentation, deletion, create a snapshot and pagination for managing and processing large amounts of data more efficiently and ensuring the efficient use of storage. The LDES server is available as on open-source building block on GitHub Setting up the LDES Server during startup process Ingesting sources (HTTP in) The LDES server is able to receive data via HTTP ingestion. Specifically, the server expects a single object (member) to be sent as input via a POST request. If the dataset still contains state objects, each of these must first be converted to a version object before being ingested in the server. Once the objects in the dataset are LDES-compliant members (whether or not after conversion to a version object) and the LDES member has been added to the LDES server, the server can effortlessly publish the LDES member as part of the LDES. More information on the HTTP ingestion can be found here. Example HTTP Ingest-Fetch Configuration: server.port: { http-port } ldes: collection-name: { short name of the collection, cannot contain characters that are used for url interpretation, e.g.’ $’, ‘=’ or ‘&amp;’, } host-name: { hostname of LDES Server } member-type: { Defines which syntax type is used to define the member id e.g. “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”, } timestamp-path: { SHACL property path to the timestamp when the version object entered the event stream., } version-of: { SHACL property path to the non-versioned identifier of the entity. } validation: shape: { URI to defined shape } enabled: { Enables/Disables shacl validation on ingested members } rest: max-age: { time in seconds that a mutable fragment can be considered up-to-date, default when omitted: 60, } max-age-immutable: { time in seconds that an immutable fragment should not be refreshed, default when omitted: 604800, } SHACL The LDES specification prescribes that each LDES must link to a SHACL shape, providing a machine-readable definition of the members in the collection. If a SHACL shape was provided on startup, the LDES server reads it before the ingestion process starts and the SHACL shape is used to validate the ingested members. Only valid members are ingested in the LDES server. When starting the server, it is possible to provide a SHACL shape via through an RDF file. At last, the SHACL shape is also published as part of the LDES on the Web. SHACL stands for Shapes Constraint Language and is used to define a set of constraints which are used to verify to conformity of RDF data with these constraints. The SHACL shape specifies the expected properties of an LDES members and the constraints that must be followed to ensure the LDES member adheres to the expected structure and semantics. It defines properties such as required properties, allowed property values, and the data types expected for the properties. More information on how to provide an RDF file, containing a SHACL shape, to the LDES server can be found here. Fragmentation To reduce the volume of data that consumers need to replicate or to speed up certain queries, the LDES server can be configured to create several fragmentations. Fragmentations are similar to indexes in databases but then published on the Web. The RDF predicate on which the fragmentation must be applied is defined through configuration. The fragmenting of a Linked Data Event Stream (LDES) is a crucial technique for managing and processing large amounts of data more efficiently. There are three main methods of fragmentation: geospatial, time-based, and substring fragmentation. Partitioning When applying partitioning, the LDES server will create fragments based on the order of arrival of the LDES member, and is a linear fragmentation. This fragmentation is considered the most basic and default fragmentation because it stands for the exact reason the LDES specification was created: replication and synchronising with a dataset. The members arriving on the LDES server are added to the first page, while the latest members are always included on the latest page. The expected parameter to apply a partioning is a member limit, indicating the amount of members that can be added to each page before creating a new page. name: “pagination” config: memberLimit: { Mandatory: member limit &gt; 0 } Algorithm The fragment to which the member should be added is determined. The currently open fragment is retrieved from the database. If this fragment contains members equal to or exceeding the member limit or no fragment can be found, a new fragment is created instead. If a new fragment is created, the following steps are taken. The new fragment becomes the new open fragment and the previous fragment becomes immutable1. This newly created fragment and the previous fragment are then linked with each other by 2 generic relationships1. The pagenumber of the new fragment is determined based on the old fragment or is set to 1 in case of the first fragment. 1 In case of the first fragment, a previous fragment does not exist so these steps are skipped. Example properties name: &quot;pagination&quot; config: memberLimit: 10 Substring fragmentation Substring fragmentation is currently no longer supported as a fragmentation option in the LDES server. Time-based fragmentation Time-based fragmentation has not yet been implemented. Example of a time-based fragmentation configuration file name: “timebased” config: memberLimit: { member limit &gt; 0 } Algorithm This fragmentiser will create an initial fragment with the current timestamp when processing a member. Members are added to the fragment until the member limit is reached. When the fragment member limit is reached, a next fragment is created with a new current timestamp. Reasons for deprecating this fragmentiser: This fragmentiser follows the algorithm of pagination but without the semantics. For a correct timebased fragmentation, members of the fragment should be checked and their value for a given property should be used to create the correct relations. This is not the case, and there is currently no demand to have this implemented. Geospatial fragmentation Consider the scenario where the address registry is published as an LDES that using partitioning. In such a case, data consumers are required to replicate the entire linear set of fragments, despite only being interested in a smaller subset of the dataset. For instance, the city of Brussels may only require addresses within its geographical region and is not interested in other addresses. However, with the partitioned LDES, they would need to iterate through all the fragments and filter the LDES members (address version objects) on the client-side. By utilising geospatial fragmentation, the data can be divided into smaller pieces (tiles) based on geographical location. This facilitates filtering on the fragment level (tiles) and allows for processing and analysis of data within specific geospatial tiles. The geospatial fragmentation supported by the LDES server is based on the “Slippy Maps” algorithm. The fragmentation expects a zoom level parameter which is used by the algorithm to divide the “world” into tiles. The number of tiles if (2^{2n}) (where n = zoom level). The second expected parameter is an RDF predicate, indicating on which property of the LDES member the fragmentation should be applied. More information about the algorithm used to apply a geospatial fragmentation can be found here. The required configuration for this fragmentation is: RDF predicate on which the fragmentation should be based Zoom level Example of geospatial fragmentation configuration file name: “geospatial” config: maxZoomLevel: { Required zoom level } fragmenterProperty: { Defines which property will be used for bucketizing } Algorithm The fragmentationObjects of the member are determined We filter the RDF statements where the predicate matches the fragmenterProperty If an optional regex is provided through the fragmenterSubjectFilter property, we filter on subjects that match this regex. We select all the object that pass the above filters. A bucket of tiles is created using the coordinates and provided zoomLevel. This is done using the Slippy Map algorithm. The tiles are iterated. The member is added to every tile, or sub-fragmentations of these tiles1. Taking into account: A new fragment is created if no fragment exists for the given tile. There is no memberLimit or max size for a fragment. They do not become immutable. The member is added to every related fragment 1 If the geospatial fragmentation is not the lowest fragmentation level, the member is not added to the tile but to a subfragment on this tile. This case is included in the example below. Example Example properties: name: &quot;geospatial&quot; config: maxZoomLevel: 15 fragmenterProperty: &quot;http://www.opengis.net/ont/geosparql#asWKT&quot; With following example input: @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix ns0: &lt;http://semweb.mmlab.be/ns/linkedconnections#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix ns1: &lt;http://vocab.gtfs.org/terms#&gt; . @prefix prov: &lt;http://www.w3.org/ns/prov#&gt; . @prefix ns2: &lt;http://www.opengis.net/ont/geosparql#&gt; . @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; . @prefix geo: &lt;http://www.w3.org/2003/01/geo/wgs84_pos#&gt; . &lt;http://njh.me/original-id#2022-09-28T17:11:28.520Z&gt; dc:isVersionOf &lt;http://njh.me/original-id&gt; ; ns0:arrivalStop &lt;http://example.org/stops/402161&gt; ; ns0:arrivalTime &quot;2022-09-28T07:14:00.000Z&quot;^^xsd:dateTime ; ns0:departureStop &lt;http://example.org/stops/402303&gt; ; ns0:departureTime &quot;2022-09-28T07:09:00.000Z&quot;^^xsd:dateTime ; ns1:dropOffType ns1:Regular ; ns1:pickupType ns1:Regular ; ns1:route &lt;http://example.org/routes/Hasselt_-_Genk&gt; ; ns1:trip &lt;http://example.org/trips/Hasselt_-_Genk/Genk_-_Hasselt/20220928T0909&gt; ; a ns0:Connection ; prov:generatedAtTime &quot;2022-09-28T17:11:28.520Z&quot;^^xsd:dateTime . &lt;http://example.org/stops/402161&gt; ns2:asWKT &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Brug&quot; ; geo:lat 5.096420e+1 ; geo:long 5.472360e+0 . &lt;http://example.org/stops/402303&gt; ns2:asWKT &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Station perron 11&quot; ; geo:lat 5.096670e+1 ; geo:long 5.496610e+0 . The selected objects would be &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral and &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral When we convert these coordinates to tiles, the bucket of tiles would be: “15/16884/10974” “15/16882/10975” When geospatial fragmentation is the lowest level After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone?tile=15/16884/10974 http://localhost:8080/addresses/by-zone?tile=15/16882/10975 When we have a timebased sub-fragmentation below geospatial fragmentation After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone-and-time?tile=15/16884/10974&amp;generatedAtTime=2023-02-15T10:14:28.262Z http://localhost:8080/addresses/by-zone-and-time?tile=15/16882/10975&amp;generatedAtTime=2023-02-15T10:14:28.262Z Note that the generatedAtTime=2023-02-15T10:14:28.262Z is an example, this can be any other fragmentation. Combining geospatial fragmentation and partioning The LDES server typically adds an LDES member to the “lowest” possible fragment, which in the case of geospatial fragmentation, would be the fragment representing the corresponding geospatial tile. However, some fragments/tiles may have many members, while others may have none. In the worst-case scenario, all members may be added to one geospatial tile/fragment, leading to an enormous fragment. Combining geospatial fragmentation with partitioning can be a useful approach to mitigate this issue. Then partitioning is applied within every geospatial tile, resulting in a set of linear fragments for every geospatial tile. Doing so, all members can still end up in the same geospatial tile, but now clients have a set of linear fragments to iterate through instead of one enormous fragment. More detailed information is available in the example below. Retention policy A retention policydetermines how long data will be kept and stored. Its purpose is to ensure the efficient use of storage resources by controlling data growth over time. Setting a retention policy per view to minimise storage fill-up is possible. Implementing a retention policy helps organisations maintain control over their data growth and ensure that storage resources are used optimally. The policy specifies the maximum duration that data should be kept. Time based retention policy The time-based retention policy can be configured using the ISO 8601 duration format. This time-based policy ensures that data is automatically deleted after a specified period, freeing up valuable storage space for new data. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:time-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT5M&quot;^^xsd:duration ; ] ; ] . duration: “PT5M” As an example, the time-based retention configuration example above is set up to ensure that data is automatically deleted after 5 minutes (PT5M). Point-in-time retention policy The point in time retention policy of the Linked Data Event Stream (LDES) only preserves the members created after a specific moment. In this way, only the members made after a given point in time retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:point-in-time-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:PointInTimePolicy ; ldes:pointInTime &quot;2023-04-12T00:00:00&quot;^^xsd:dateTime ] ; ] . Version-based retention policy The version-based retention policy of the system ensures that only the x most recent members of each state object are retained. In this way, only the x most recent members of each state object retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:version-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:LatestVersionSubset; ldes:amount 2 ; ] ; ] . Combine retention policies Time based and Point-in-time retention The integration of Time-based and Point-in-Time retention strategies offers a tactical method for organizations aiming to restrict data volume from a certain Point in Time within a specified time frame. Time-based and Version-based retention This can be used, when the focus is on datasets that are primarily relevant in their ‘latest state’. A practical example is a dataset like a view of an address registry, where only the latest, updated addresses are pertinent. Such datasets require a dynamic approach to data retention. Version-based retention: to retain only the most recent version of a data item. Time-based retention: to maintain changes within a specific time frame. Data users can retrieve and maintain the full state of the data, regardless of when they access the data stream, all clients have the same information, leading to uniformity and consistency in data analysis. On the other hand, for data publishers; there’s no need to store all historical data. Only the most recent state plus a short history (e.g., two days) is retained. This approach results in datasets that do not grow exponentially, simplifying management and accessibility. The combination of Version-based and Time-based Retention offers an advanced solution for managing dynamic datasets. This approach is particularly suited for scenarios where only the latest data is relevant, while still retaining a limited historical context. It achieves an optimal balance between accessibility, consistency, and efficiency in both data storage and usage. Hosting the LDES stream SHACL shape SHACL (Shapes Constraint Language) is a language used to validate RDF graphs against a set of conditions provided as shapes and other constructs in an RDF graph. The LDES Server facilitates hosting a SHACL shape describing the members in the LDES. Through configuration, it is possible to reference an existing SHACL shape via an URL or to provide a static file with an RDF description of the SHACL shape. Hosting DCAT metadata DCAT is a standardised RDF vocabulary to describe data catalogues on the Web, allowing easy interoperability between catalogues. Using a standard schema, DCAT enhances discoverability and facilitates federated search across multiple catalogues. The LDES server facilitates hosting DCAT metadata when publishing an LDES. Through configuration, as with the SHACL shape, it is possible to reference an existing DCAT via an URI or to provide a static file containing an RDF description of the DCAT. More information on configuring DCAT on the LDES Server can be found here. Add DCAT configuration for the LDES server @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en . Add DCAT metadata for a LDES @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix dc: &lt;http://purl.org/dc/terms/&gt; . [] a dcat:Dataset ; dc:title &quot;My LDES&quot;@en ; dc:description &quot;LDES for my data collection&quot;@en . Setting up the LDES Server using API Setup of the LDES Server To start a default LDES Server, a few basic steps are needed. Create a ldes-server.yml config file with this basic content mongock: migration-scan-package: VSDS springdoc: swagger-ui: path: /v1/swagger ldes-server: host-name: &quot;http://localhost:8080&quot; management: tracing: enabled: false spring: data: mongodb: database: ldes host: ldes-mongodb port: 27017 auto-index-creation: true Create a local docker-compose.yml file with the content below. version: &quot;3.3&quot; services: ldes-server: container_name: basic_ldes-server image: ghcr.io/informatievlaanderen/ldes-server:20230602200451 environment: - SPRING_CONFIG_LOCATION=/config/ volumes: - ./ldes-server.yml:/config/application.yml:ro ports: - 8080:8080 networks: - ldes depends_on: - ldes-mongodb ldes-mongodb: container_name: quick_start_ldes-mongodb image: mongo:6.0.4 ports: - 27017:27017 networks: - ldes networks: ldes: name: quick_start_network Run docker compose up within the work directory of docker-compose.yml file to start the containers. Setting up metadata for the server Setting up metadata for your LDES Server can be done by posting a RDF object defining a DCAT catalog to /admin/api/v1/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en ; dct:publisher &lt;http://sample.org/company/PublisherX&gt; . &lt;http://sample.org/company/PublisherX&gt; a legal:LegalEntity ; foaf:name &quot;Data Publishing Company&quot; ; legal:legalName &quot;Data Publishing Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;Some full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-publishing-company.com&quot; ] . This can be updated by performing a PUT operation with an updated DCAT catalog on /admin/api/v1/dcat/{catalogID} Finally, to delete the catalog, a DELETE request can be performed at /admin/api/v1/dcat/{catalogID} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a collection Setting up a collection on the LDES Server can be done by posting a RDF object defining a collection to /admin/api/v1/eventstreams @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix custom: &lt;http://example.org/&gt; . @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; . @prefix server: &lt;http://localhost:8080/&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:exampleCollection a ldes:EventStream ; ldes:timestampPath dcterms:created ; ldes:versionOfPath dcterms:isVersionOf ; custom:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; ; custom:hasDefaultView &quot;true&quot;^^xsd:boolean ; tree:shape [ sh:closed &quot;true&quot;; a sh:NodeShape ; ] . This collection can be deleted by performing a DELETE request on /admin/api/v1/eventstreams/{collectionName} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for collection To add metadata to an inserted collection, one can post a DCAT dataset on /admin/api/v1/eventstreams/{collectionName}/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Dataset ; dct:title &quot;My LDES&quot;@en ; dct:title &quot;Mijn LDES&quot;@nl ; dct:description &quot;LDES for my data collection&quot;@en ; dct:description &quot;LDES vir my data-insameling&quot;@af ; dct:creator &lt;http://sample.org/company/MyDataOwner&gt; . &lt;http://sample.org/company/MyDataOwner&gt; a legal:LegalEntity ; foaf:name &quot;Data Company&quot; ; legal:legalName &quot;Data Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;My full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-company.com&quot; ] . To update this entry, a PUT request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat. Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a view Setting up a view on the LDES Server can be done by performing a POST operation with a RDF object defining a collection to /admin/api/v1/eventstreams/{collectionName}/views @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix example: &lt;http://example.org/&gt; . @prefix server: &lt;http://localhost:8080/name1/&gt; . @prefix viewName: &lt;http://localhost:8080/name1/view1/&gt; . viewName:description a &lt;https://w3id.org/tree#ViewDescription&gt; ; ldes:retentionPolicy [ a ldes:retentionPolicy ; example:name &quot;timebased&quot;; example:duration &quot;10&quot; ; ] . server:view1 &lt;https://w3id.org/tree#viewDescription&gt; &lt;http://localhost:8080/name1/view1/description&gt; . Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for view To add metadata to an inserted view, one can perform a PUT operation with a DCAT view description and dataservice on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix host: &lt;http://localhost:8080/&gt; . @prefix server: &lt;http://localhost:8080/collection/&gt; . @prefix viewName: &lt;http://localhost:8080/collection/viewName/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:viewName a tree:Node ; tree:viewDescription viewName:description . viewName:description a dcat:DataService , tree:ViewDescription ; tree:fragmentationStrategy ([ a tree:ExampleFragmentation ; tree:pageSize &quot;100&quot; ; tree:property &quot;example/property&quot; ]) ; dc:description &quot;Geospatial fragmentation for my LDES&quot;@en ; dc:title &quot;My geo-spatial view&quot;@en ; dc:license [ a dc:LicenseDocument ; dc:type [ a skos:Concept ; skos:prefLabel &quot;some public license&quot;@en ] ] ; ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT2M&quot;^^xsd:duration ; ] ; dcat:endpointURL server:viewName ; dcat:servesDataset host:collection ; Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up ACM/IDM The Access and User Management (ACM) and Identity Management (IDM) of the Flemish government are products that allow you to manage the access and identity of data users that consume the published LDES. This ADM/IDM security option through an API gateway, protects LDES Collections and Views from unauthorized access, recognizing the importance of data security. The API gateway serves as a security layer, managing access and applying authentication methods, such as ACM/IDM, reducing the chance of exposing sensitive data to unwanted parties. ACM/IDM verifies the identity and permissions of users and devices. This improved security feature increases the trust and dependability of LDES Server for organizations working in security-sensitive environments. During the ACM/IDM Standard integration process, you will work alongside the ACM/IDM integration team of the Flemish government to follow the standard connection procedure. One of our analysts will guide you through this process via an integration file, where agreements and requirements are documented. This procedure is followed for both new files and modifications to existing files. You can find here more information. OpenAPI swagger UI Via the OpenAPI Specification it becomes possible discover how the LDES server API works, how to configure the LDES server, etc., in a user-friendly manner. As an example, the Swagger API docs can be find here. The Swagger API should look like this:" /> <link rel="canonical" href="http://0.0.0.0:4000/publisher/LDES_server" /> <meta property="og:url" content="http://0.0.0.0:4000/publisher/LDES_server" /> <meta property="og:site_name" content="Technical Documentation" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="LDES server" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"LDES server LDIO Pipeline see reference guide Apache Nifi Component Name: `` see Apache Nifi reference guide The Linked Data Event Stream (LDES) server is a configurable component that can be used to ingest, store, and (re-)publish one or multiple Linked Data Event Stream(s). The open-source LDES server is built in the context of the VSDS project to exchange (Open) Data easily. The server can be configured to meet the organisation’s specific needs. Functionalities include retention policy, fragmentation, deletion, create a snapshot and pagination for managing and processing large amounts of data more efficiently and ensuring the efficient use of storage. The LDES server is available as on open-source building block on GitHub Setting up the LDES Server during startup process Ingesting sources (HTTP in) The LDES server is able to receive data via HTTP ingestion. Specifically, the server expects a single object (member) to be sent as input via a POST request. If the dataset still contains state objects, each of these must first be converted to a version object before being ingested in the server. Once the objects in the dataset are LDES-compliant members (whether or not after conversion to a version object) and the LDES member has been added to the LDES server, the server can effortlessly publish the LDES member as part of the LDES. More information on the HTTP ingestion can be found here. Example HTTP Ingest-Fetch Configuration: server.port: { http-port } ldes: collection-name: { short name of the collection, cannot contain characters that are used for url interpretation, e.g.’ $’, ‘=’ or ‘&amp;’, } host-name: { hostname of LDES Server } member-type: { Defines which syntax type is used to define the member id e.g. “https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”, } timestamp-path: { SHACL property path to the timestamp when the version object entered the event stream., } version-of: { SHACL property path to the non-versioned identifier of the entity. } validation: shape: { URI to defined shape } enabled: { Enables/Disables shacl validation on ingested members } rest: max-age: { time in seconds that a mutable fragment can be considered up-to-date, default when omitted: 60, } max-age-immutable: { time in seconds that an immutable fragment should not be refreshed, default when omitted: 604800, } SHACL The LDES specification prescribes that each LDES must link to a SHACL shape, providing a machine-readable definition of the members in the collection. If a SHACL shape was provided on startup, the LDES server reads it before the ingestion process starts and the SHACL shape is used to validate the ingested members. Only valid members are ingested in the LDES server. When starting the server, it is possible to provide a SHACL shape via through an RDF file. At last, the SHACL shape is also published as part of the LDES on the Web. SHACL stands for Shapes Constraint Language and is used to define a set of constraints which are used to verify to conformity of RDF data with these constraints. The SHACL shape specifies the expected properties of an LDES members and the constraints that must be followed to ensure the LDES member adheres to the expected structure and semantics. It defines properties such as required properties, allowed property values, and the data types expected for the properties. More information on how to provide an RDF file, containing a SHACL shape, to the LDES server can be found here. Fragmentation To reduce the volume of data that consumers need to replicate or to speed up certain queries, the LDES server can be configured to create several fragmentations. Fragmentations are similar to indexes in databases but then published on the Web. The RDF predicate on which the fragmentation must be applied is defined through configuration. The fragmenting of a Linked Data Event Stream (LDES) is a crucial technique for managing and processing large amounts of data more efficiently. There are three main methods of fragmentation: geospatial, time-based, and substring fragmentation. Partitioning When applying partitioning, the LDES server will create fragments based on the order of arrival of the LDES member, and is a linear fragmentation. This fragmentation is considered the most basic and default fragmentation because it stands for the exact reason the LDES specification was created: replication and synchronising with a dataset. The members arriving on the LDES server are added to the first page, while the latest members are always included on the latest page. The expected parameter to apply a partioning is a member limit, indicating the amount of members that can be added to each page before creating a new page. name: “pagination” config: memberLimit: { Mandatory: member limit &gt; 0 } Algorithm The fragment to which the member should be added is determined. The currently open fragment is retrieved from the database. If this fragment contains members equal to or exceeding the member limit or no fragment can be found, a new fragment is created instead. If a new fragment is created, the following steps are taken. The new fragment becomes the new open fragment and the previous fragment becomes immutable1. This newly created fragment and the previous fragment are then linked with each other by 2 generic relationships1. The pagenumber of the new fragment is determined based on the old fragment or is set to 1 in case of the first fragment. 1 In case of the first fragment, a previous fragment does not exist so these steps are skipped. Example properties name: &quot;pagination&quot; config: memberLimit: 10 Substring fragmentation Substring fragmentation is currently no longer supported as a fragmentation option in the LDES server. Time-based fragmentation Time-based fragmentation has not yet been implemented. Example of a time-based fragmentation configuration file name: “timebased” config: memberLimit: { member limit &gt; 0 } Algorithm This fragmentiser will create an initial fragment with the current timestamp when processing a member. Members are added to the fragment until the member limit is reached. When the fragment member limit is reached, a next fragment is created with a new current timestamp. Reasons for deprecating this fragmentiser: This fragmentiser follows the algorithm of pagination but without the semantics. For a correct timebased fragmentation, members of the fragment should be checked and their value for a given property should be used to create the correct relations. This is not the case, and there is currently no demand to have this implemented. Geospatial fragmentation Consider the scenario where the address registry is published as an LDES that using partitioning. In such a case, data consumers are required to replicate the entire linear set of fragments, despite only being interested in a smaller subset of the dataset. For instance, the city of Brussels may only require addresses within its geographical region and is not interested in other addresses. However, with the partitioned LDES, they would need to iterate through all the fragments and filter the LDES members (address version objects) on the client-side. By utilising geospatial fragmentation, the data can be divided into smaller pieces (tiles) based on geographical location. This facilitates filtering on the fragment level (tiles) and allows for processing and analysis of data within specific geospatial tiles. The geospatial fragmentation supported by the LDES server is based on the “Slippy Maps” algorithm. The fragmentation expects a zoom level parameter which is used by the algorithm to divide the “world” into tiles. The number of tiles if (2^{2n}) (where n = zoom level). The second expected parameter is an RDF predicate, indicating on which property of the LDES member the fragmentation should be applied. More information about the algorithm used to apply a geospatial fragmentation can be found here. The required configuration for this fragmentation is: RDF predicate on which the fragmentation should be based Zoom level Example of geospatial fragmentation configuration file name: “geospatial” config: maxZoomLevel: { Required zoom level } fragmenterProperty: { Defines which property will be used for bucketizing } Algorithm The fragmentationObjects of the member are determined We filter the RDF statements where the predicate matches the fragmenterProperty If an optional regex is provided through the fragmenterSubjectFilter property, we filter on subjects that match this regex. We select all the object that pass the above filters. A bucket of tiles is created using the coordinates and provided zoomLevel. This is done using the Slippy Map algorithm. The tiles are iterated. The member is added to every tile, or sub-fragmentations of these tiles1. Taking into account: A new fragment is created if no fragment exists for the given tile. There is no memberLimit or max size for a fragment. They do not become immutable. The member is added to every related fragment 1 If the geospatial fragmentation is not the lowest fragmentation level, the member is not added to the tile but to a subfragment on this tile. This case is included in the example below. Example Example properties: name: &quot;geospatial&quot; config: maxZoomLevel: 15 fragmenterProperty: &quot;http://www.opengis.net/ont/geosparql#asWKT&quot; With following example input: @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix ns0: &lt;http://semweb.mmlab.be/ns/linkedconnections#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix ns1: &lt;http://vocab.gtfs.org/terms#&gt; . @prefix prov: &lt;http://www.w3.org/ns/prov#&gt; . @prefix ns2: &lt;http://www.opengis.net/ont/geosparql#&gt; . @prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; . @prefix geo: &lt;http://www.w3.org/2003/01/geo/wgs84_pos#&gt; . &lt;http://njh.me/original-id#2022-09-28T17:11:28.520Z&gt; dc:isVersionOf &lt;http://njh.me/original-id&gt; ; ns0:arrivalStop &lt;http://example.org/stops/402161&gt; ; ns0:arrivalTime &quot;2022-09-28T07:14:00.000Z&quot;^^xsd:dateTime ; ns0:departureStop &lt;http://example.org/stops/402303&gt; ; ns0:departureTime &quot;2022-09-28T07:09:00.000Z&quot;^^xsd:dateTime ; ns1:dropOffType ns1:Regular ; ns1:pickupType ns1:Regular ; ns1:route &lt;http://example.org/routes/Hasselt_-_Genk&gt; ; ns1:trip &lt;http://example.org/trips/Hasselt_-_Genk/Genk_-_Hasselt/20220928T0909&gt; ; a ns0:Connection ; prov:generatedAtTime &quot;2022-09-28T17:11:28.520Z&quot;^^xsd:dateTime . &lt;http://example.org/stops/402161&gt; ns2:asWKT &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Brug&quot; ; geo:lat 5.096420e+1 ; geo:long 5.472360e+0 . &lt;http://example.org/stops/402303&gt; ns2:asWKT &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral ; a ns1:Stop ; rdfs:label &quot;Genk Station perron 11&quot; ; geo:lat 5.096670e+1 ; geo:long 5.496610e+0 . The selected objects would be &quot;POINT (5.47236 50.9642)&quot;^^ns2:wktLiteral and &quot;POINT (5.49661 50.9667)&quot;^^ns2:wktLiteral When we convert these coordinates to tiles, the bucket of tiles would be: “15/16884/10974” “15/16882/10975” When geospatial fragmentation is the lowest level After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone?tile=15/16884/10974 http://localhost:8080/addresses/by-zone?tile=15/16882/10975 When we have a timebased sub-fragmentation below geospatial fragmentation After ingestion the member will be part of the following two fragments http://localhost:8080/addresses/by-zone-and-time?tile=15/16884/10974&amp;generatedAtTime=2023-02-15T10:14:28.262Z http://localhost:8080/addresses/by-zone-and-time?tile=15/16882/10975&amp;generatedAtTime=2023-02-15T10:14:28.262Z Note that the generatedAtTime=2023-02-15T10:14:28.262Z is an example, this can be any other fragmentation. Combining geospatial fragmentation and partioning The LDES server typically adds an LDES member to the “lowest” possible fragment, which in the case of geospatial fragmentation, would be the fragment representing the corresponding geospatial tile. However, some fragments/tiles may have many members, while others may have none. In the worst-case scenario, all members may be added to one geospatial tile/fragment, leading to an enormous fragment. Combining geospatial fragmentation with partitioning can be a useful approach to mitigate this issue. Then partitioning is applied within every geospatial tile, resulting in a set of linear fragments for every geospatial tile. Doing so, all members can still end up in the same geospatial tile, but now clients have a set of linear fragments to iterate through instead of one enormous fragment. More detailed information is available in the example below. Retention policy A retention policydetermines how long data will be kept and stored. Its purpose is to ensure the efficient use of storage resources by controlling data growth over time. Setting a retention policy per view to minimise storage fill-up is possible. Implementing a retention policy helps organisations maintain control over their data growth and ensure that storage resources are used optimally. The policy specifies the maximum duration that data should be kept. Time based retention policy The time-based retention policy can be configured using the ISO 8601 duration format. This time-based policy ensures that data is automatically deleted after a specified period, freeing up valuable storage space for new data. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:time-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT5M&quot;^^xsd:duration ; ] ; ] . duration: “PT5M” As an example, the time-based retention configuration example above is set up to ensure that data is automatically deleted after 5 minutes (PT5M). Point-in-time retention policy The point in time retention policy of the Linked Data Event Stream (LDES) only preserves the members created after a specific moment. In this way, only the members made after a given point in time retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:point-in-time-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:PointInTimePolicy ; ldes:pointInTime &quot;2023-04-12T00:00:00&quot;^^xsd:dateTime ] ; ] . Version-based retention policy The version-based retention policy of the system ensures that only the x most recent members of each state object are retained. In this way, only the x most recent members of each state object retain. @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . @prefix server: &lt;http://localhost:8080/mobility-hindrances/&gt; . server:version-based-retention tree:viewDescription [ ldes:retentionPolicy [ a ldes:LatestVersionSubset; ldes:amount 2 ; ] ; ] . Combine retention policies Time based and Point-in-time retention The integration of Time-based and Point-in-Time retention strategies offers a tactical method for organizations aiming to restrict data volume from a certain Point in Time within a specified time frame. Time-based and Version-based retention This can be used, when the focus is on datasets that are primarily relevant in their ‘latest state’. A practical example is a dataset like a view of an address registry, where only the latest, updated addresses are pertinent. Such datasets require a dynamic approach to data retention. Version-based retention: to retain only the most recent version of a data item. Time-based retention: to maintain changes within a specific time frame. Data users can retrieve and maintain the full state of the data, regardless of when they access the data stream, all clients have the same information, leading to uniformity and consistency in data analysis. On the other hand, for data publishers; there’s no need to store all historical data. Only the most recent state plus a short history (e.g., two days) is retained. This approach results in datasets that do not grow exponentially, simplifying management and accessibility. The combination of Version-based and Time-based Retention offers an advanced solution for managing dynamic datasets. This approach is particularly suited for scenarios where only the latest data is relevant, while still retaining a limited historical context. It achieves an optimal balance between accessibility, consistency, and efficiency in both data storage and usage. Hosting the LDES stream SHACL shape SHACL (Shapes Constraint Language) is a language used to validate RDF graphs against a set of conditions provided as shapes and other constructs in an RDF graph. The LDES Server facilitates hosting a SHACL shape describing the members in the LDES. Through configuration, it is possible to reference an existing SHACL shape via an URL or to provide a static file with an RDF description of the SHACL shape. Hosting DCAT metadata DCAT is a standardised RDF vocabulary to describe data catalogues on the Web, allowing easy interoperability between catalogues. Using a standard schema, DCAT enhances discoverability and facilitates federated search across multiple catalogues. The LDES server facilitates hosting DCAT metadata when publishing an LDES. Through configuration, as with the SHACL shape, it is possible to reference an existing DCAT via an URI or to provide a static file containing an RDF description of the DCAT. More information on configuring DCAT on the LDES Server can be found here. Add DCAT configuration for the LDES server @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en . Add DCAT metadata for a LDES @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix dc: &lt;http://purl.org/dc/terms/&gt; . [] a dcat:Dataset ; dc:title &quot;My LDES&quot;@en ; dc:description &quot;LDES for my data collection&quot;@en . Setting up the LDES Server using API Setup of the LDES Server To start a default LDES Server, a few basic steps are needed. Create a ldes-server.yml config file with this basic content mongock: migration-scan-package: VSDS springdoc: swagger-ui: path: /v1/swagger ldes-server: host-name: &quot;http://localhost:8080&quot; management: tracing: enabled: false spring: data: mongodb: database: ldes host: ldes-mongodb port: 27017 auto-index-creation: true Create a local docker-compose.yml file with the content below. version: &quot;3.3&quot; services: ldes-server: container_name: basic_ldes-server image: ghcr.io/informatievlaanderen/ldes-server:20230602200451 environment: - SPRING_CONFIG_LOCATION=/config/ volumes: - ./ldes-server.yml:/config/application.yml:ro ports: - 8080:8080 networks: - ldes depends_on: - ldes-mongodb ldes-mongodb: container_name: quick_start_ldes-mongodb image: mongo:6.0.4 ports: - 27017:27017 networks: - ldes networks: ldes: name: quick_start_network Run docker compose up within the work directory of docker-compose.yml file to start the containers. Setting up metadata for the server Setting up metadata for your LDES Server can be done by posting a RDF object defining a DCAT catalog to /admin/api/v1/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Catalog ; dct:title &quot;My LDES&#39;es&quot;@en ; dct:description &quot;All LDES&#39;es from publiser X&quot;@en ; dct:publisher &lt;http://sample.org/company/PublisherX&gt; . &lt;http://sample.org/company/PublisherX&gt; a legal:LegalEntity ; foaf:name &quot;Data Publishing Company&quot; ; legal:legalName &quot;Data Publishing Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;Some full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-publishing-company.com&quot; ] . This can be updated by performing a PUT operation with an updated DCAT catalog on /admin/api/v1/dcat/{catalogID} Finally, to delete the catalog, a DELETE request can be performed at /admin/api/v1/dcat/{catalogID} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a collection Setting up a collection on the LDES Server can be done by posting a RDF object defining a collection to /admin/api/v1/eventstreams @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix custom: &lt;http://example.org/&gt; . @prefix dcterms: &lt;http://purl.org/dc/terms/&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix sh: &lt;http://www.w3.org/ns/shacl#&gt; . @prefix server: &lt;http://localhost:8080/&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:exampleCollection a ldes:EventStream ; ldes:timestampPath dcterms:created ; ldes:versionOfPath dcterms:isVersionOf ; custom:memberType &lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt; ; custom:hasDefaultView &quot;true&quot;^^xsd:boolean ; tree:shape [ sh:closed &quot;true&quot;; a sh:NodeShape ; ] . This collection can be deleted by performing a DELETE request on /admin/api/v1/eventstreams/{collectionName} Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for collection To add metadata to an inserted collection, one can post a DCAT dataset on /admin/api/v1/eventstreams/{collectionName}/dcat @prefix dct: &lt;http://purl.org/dc/terms/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix foaf: &lt;http://xmlns.com/foaf/0.1/&gt; . @prefix org: &lt;http://www.w3.org/ns/org#&gt; . @prefix legal: &lt;http://www.w3.org/ns/legal#&gt; . @prefix m8g: &lt;http://data.europa.eu/m8g/&gt; . @prefix locn: &lt;http://www.w3.org/ns/locn#&gt; . [] a dcat:Dataset ; dct:title &quot;My LDES&quot;@en ; dct:title &quot;Mijn LDES&quot;@nl ; dct:description &quot;LDES for my data collection&quot;@en ; dct:description &quot;LDES vir my data-insameling&quot;@af ; dct:creator &lt;http://sample.org/company/MyDataOwner&gt; . &lt;http://sample.org/company/MyDataOwner&gt; a legal:LegalEntity ; foaf:name &quot;Data Company&quot; ; legal:legalName &quot;Data Company BV&quot; ; m8g:registeredAddress [ a locn:Address ; locn:fullAddress &quot;My full address here&quot; ] ; m8g:contactPoint [ a m8g:ContactPoint ; m8g:hasEmail &quot;info@data-company.com&quot; ] . To update this entry, a PUT request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat. Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up a view Setting up a view on the LDES Server can be done by performing a POST operation with a RDF object defining a collection to /admin/api/v1/eventstreams/{collectionName}/views @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix example: &lt;http://example.org/&gt; . @prefix server: &lt;http://localhost:8080/name1/&gt; . @prefix viewName: &lt;http://localhost:8080/name1/view1/&gt; . viewName:description a &lt;https://w3id.org/tree#ViewDescription&gt; ; ldes:retentionPolicy [ a ldes:retentionPolicy ; example:name &quot;timebased&quot;; example:duration &quot;10&quot; ; ] . server:view1 &lt;https://w3id.org/tree#viewDescription&gt; &lt;http://localhost:8080/name1/view1/description&gt; . Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up metadata for view To add metadata to an inserted view, one can perform a PUT operation with a DCAT view description and dataservice on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat @prefix ldes: &lt;https://w3id.org/ldes#&gt; . @prefix tree: &lt;https://w3id.org/tree#&gt;. @prefix dc: &lt;http://purl.org/dc/terms/&gt; . @prefix host: &lt;http://localhost:8080/&gt; . @prefix server: &lt;http://localhost:8080/collection/&gt; . @prefix viewName: &lt;http://localhost:8080/collection/viewName/&gt; . @prefix dcat: &lt;http://www.w3.org/ns/dcat#&gt; . @prefix skos: &lt;http://www.w3.org/2004/02/skos/core#&gt; . @prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; . server:viewName a tree:Node ; tree:viewDescription viewName:description . viewName:description a dcat:DataService , tree:ViewDescription ; tree:fragmentationStrategy ([ a tree:ExampleFragmentation ; tree:pageSize &quot;100&quot; ; tree:property &quot;example/property&quot; ]) ; dc:description &quot;Geospatial fragmentation for my LDES&quot;@en ; dc:title &quot;My geo-spatial view&quot;@en ; dc:license [ a dc:LicenseDocument ; dc:type [ a skos:Concept ; skos:prefLabel &quot;some public license&quot;@en ] ] ; ldes:retentionPolicy [ a ldes:DurationAgoPolicy ; tree:value &quot;PT2M&quot;^^xsd:duration ; ] ; dcat:endpointURL server:viewName ; dcat:servesDataset host:collection ; Similarly, a DELETE request can be performed on /admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat Further documentation can be found on the internal Swagger API available at /v1/swagger Setting up ACM/IDM The Access and User Management (ACM) and Identity Management (IDM) of the Flemish government are products that allow you to manage the access and identity of data users that consume the published LDES. This ADM/IDM security option through an API gateway, protects LDES Collections and Views from unauthorized access, recognizing the importance of data security. The API gateway serves as a security layer, managing access and applying authentication methods, such as ACM/IDM, reducing the chance of exposing sensitive data to unwanted parties. ACM/IDM verifies the identity and permissions of users and devices. This improved security feature increases the trust and dependability of LDES Server for organizations working in security-sensitive environments. During the ACM/IDM Standard integration process, you will work alongside the ACM/IDM integration team of the Flemish government to follow the standard connection procedure. One of our analysts will guide you through this process via an integration file, where agreements and requirements are documented. This procedure is followed for both new files and modifications to existing files. You can find here more information. OpenAPI swagger UI Via the OpenAPI Specification it becomes possible discover how the LDES server API works, how to configure the LDES server, etc., in a user-friendly manner. As an example, the Swagger API docs can be find here. The Swagger API should look like this:","headline":"LDES server","url":"http://0.0.0.0:4000/publisher/LDES_server"}</script> <!-- End Jekyll SEO tag --> <div class="test-header" data-v-df634f57="" data-v-7a7a37b1=""> <hr class="divider" data-v-df634f57=""> </div> <div class="navbar navbar-fixed-top"> <div class="navbar-inner"> <div class="container-fluid"> <a href="https://openldes.org/assets/"> <button type="button" class="btn btn-navbar custom-border-activated" > <span class="nav-icon-bar">Home</span> </button> </a> <a href="https://github.com/OpenLDES/Onboarding-Example"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Tutorial</span> </button> </a> <a href="https://openldes.github.io/LDESServer/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Reference guide: LDES server</span> </button> </a> <a href="https://openldes.github.io/Linked-Data-Interactions/"> <button type="button" class="btn btn-navbar custom-border" > <span class="nav-icon-bar">Reference guide: LDI Pipelines</span> </button> </a> </div> </div> </div> <style> .custom-border-activated { background-color: rgb(255, 230, 21); } .custom-border { border: 0.3px solid rgb(0, 200, 171); /* Randkleur */ /* Voeg hier eventueel andere stijlelementen toe */ } .navbar-fixed-top .navbar-inner { margin-top:30px; height: 35px; padding: 0; border-top: 1px solid #d4d4d4; z-index: 1000; position: fixed; right:0px; } @media (min-width: 50rem) .navbar-fixed-top { position: relative !important; width: auto !important; height: 100% !important; padding: 0; transition: none; } .global-header[data-v-df634f57] { display: flex; margin-left: 0px; align-items: center; position: fixed; width: 100%; background-color: white; z-index: 100; } .test-header{ margin-bottom: 20px; overflow:hidden; z-index: 100; } element.style { } .small-global-header-divider[data-v-df634f57] { margin: 0 8px 0 4px; } .header-font { color: #333332; font-family: Flanders Art Sans, sans-serif; font-size: 12px; font-style: normal; font-weight: 500; line-height: normal; letter-spacing: 0.5px; text-transform: uppercase; } .spacer { flex-grow: 1; } .divider { border: 1px solid #8f8f8f66; margin: 0; } #help-needed > span[data-v-df634f57] { margin-left: 25px; } /* title of the site */ #header { height: 80px; } #header hgroup { position: absolute; top: 10px; left: 20px; } #header h1 { margin: 0; font-size: 1.75em; font-weight: bold; } #header h2 { color: #ccc; margin: 0 0 4px 16px; line-height: 0.8; font-size: 1.0em; font-weight: normal; } #header a, #header a:hover, #header a:visited { text-decoration: none; } .navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus { box-shadow: none; } .navbar .btn-navbar { margin-bottom: 5px; } </style> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Technical Documentation </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li></ul> <div class="nav-category">Basic concepts</div> <ul class="nav-list"><li class="nav-list-item"><a href="/basic/1_linked_data" class="nav-list-link">1. Basic concept Linked Data</a></li><li class="nav-list-item"><a href="/basic/2_introduction" class="nav-list-link">2. Why LDES?</a></li><li class="nav-list-item"><a href="/basic/3_Specification" class="nav-list-link">3. What is a LDES?</a></li><li class="nav-list-item"><a href="/basic/4_basic_structure_LDES" class="nav-list-link">4. Basic structure LDES</a></li><li class="nav-list-item"><a href="/basic/5_replication" class="nav-list-link">5. Replication & synchronisation</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 6. Fragmentations and pagination category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basic/fragmentations/index" class="nav-list-link">6. Fragmentations and pagination</a><ul class="nav-list"><li class="nav-list-item "><a href="/basic/fragmentations/geospatial" class="nav-list-link">Geospatial Fragmentation</a></li><li class="nav-list-item "><a href="/basic/fragmentations/pagination" class="nav-list-link">Pagination</a></li><li class="nav-list-item "><a href="/basic/fragmentations/timebased" class="nav-list-link">Timebased Fragmentation</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 7. Retention Policies category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/basic/retention-policies/index" class="nav-list-link">7. Retention Policies</a><ul class="nav-list"><li class="nav-list-item "><a href="/basic/retention-policies/timebased" class="nav-list-link">Timebased Retention</a></li><li class="nav-list-item "><a href="/basic/retention-policies/version-based" class="nav-list-link">Version Based Retention</a></li></ul></li><li class="nav-list-item"><a href="/basic/6_DCAT" class="nav-list-link">8. Metadata catalogue (DCAT)</a></li><li class="nav-list-item"><a href="/basic/7_SHACL" class="nav-list-link">9. SHACL validation</a></li><li class="nav-list-item"><a href="/basic/--%20OSLO%20mapping" class="nav-list-link">--> OSLO mapping</a></li><li class="nav-list-item"><a href="/basic/--%20blog%20posts" class="nav-list-link">--> Blog posts</a></li></ul> <div class="nav-category">General Pipeline</div> <ul class="nav-list"><li class="nav-list-item"><a href="/pipeline/general_concept" class="nav-list-link">General concept</a></li><li class="nav-list-item"><a href="/pipeline/environements" class="nav-list-link">Supported frameworks</a></li><li class="nav-list-item"><a href="/pipeline/release" class="nav-list-link">Release management</a></li><li class="nav-list-item"><a href="/pipeline/performance" class="nav-list-link">Performance</a></li></ul> <div class="nav-category">Publishing Pipeline</div> <ul class="nav-list"><li class="nav-list-item"><a href="/publisher/index" class="nav-list-link">Publishing Pipeline</a></li><li class="nav-list-item"><a href="/publisher/examples" class="nav-list-link">Examples publishing Pipeline</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 1. Input components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/publisher/inputs/index" class="nav-list-link">1. Input components</a><ul class="nav-list"><li class="nav-list-item "><a href="/publisher/inputs/http-in-poller" class="nav-list-link">HTTP In Poller</a></li><li class="nav-list-item "><a href="/publisher/inputs/http-in" class="nav-list-link">HTTP In</a></li><li class="nav-list-item "><a href="/publisher/inputs/kafka-in" class="nav-list-link">Kafka In</a></li><li class="nav-list-item "><a href="/publisher/inputs/amqp-in" class="nav-list-link">AMQP In</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2. Adapter components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/publisher/adapters/index" class="nav-list-link">2. Adapter components</a><ul class="nav-list"><li class="nav-list-item "><a href="/publisher/adapters/ngsiv2-to-ld" class="nav-list-link">NGSI V2 to LD Adapter</a></li><li class="nav-list-item "><a href="/publisher/adapters/rdf-adapter" class="nav-list-link">RDF Adapter</a></li><li class="nav-list-item "><a href="/publisher/adapters/rml-adapter" class="nav-list-link">RML Adapter</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 3. Transformer components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/publisher/transformers/index" class="nav-list-link">3. Transformer components</a><ul class="nav-list"><li class="nav-list-item "><a href="/publisher/transformers/geojson-to-wkt" class="nav-list-link">GeoJson to Wkt Transformer</a></li><li class="nav-list-item "><a href="/publisher/transformers/sparql-construct" class="nav-list-link">SPARQL Construct</a></li><li class="nav-list-item "><a href="/publisher/transformers/version-materializer" class="nav-list-link">Version Materializer</a></li><li class="nav-list-item "><a href="/publisher/transformers/version-object-creator" class="nav-list-link">Version Object Creator</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 4. Output components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/publisher/outputs/index" class="nav-list-link">4. Output components</a><ul class="nav-list"><li class="nav-list-item "><a href="/publisher/outputs/console-out" class="nav-list-link">Console Out</a></li><li class="nav-list-item "><a href="/publisher/outputs/http-out" class="nav-list-link">HTTP Out</a></li><li class="nav-list-item "><a href="/publisher/outputs/kafka-out" class="nav-list-link">Kafka Out</a></li><li class="nav-list-item "><a href="/publisher/outputs/repository-materialiser" class="nav-list-link">Repository Materialization</a></li></ul></li><li class="nav-list-item active"><a href="/publisher/LDES_server" class="nav-list-link active">5. LDES server</a></li></ul> <div class="nav-category">Consuming Pipeline</div> <ul class="nav-list"><li class="nav-list-item"><a href="/consumer/index" class="nav-list-link">Consuming pipeline</a></li><li class="nav-list-item"><a href="/consumer/examples" class="nav-list-link">Examples consuming Pipeline</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 1. Input components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/consumer/inputs/index" class="nav-list-link">1. Input components</a><ul class="nav-list"><li class="nav-list-item "><a href="/consumer/inputs/ldes-client" class="nav-list-link">LDES Client</a></li><li class="nav-list-item "><a href="/consumer/inputs/ldes-client-connector" class="nav-list-link">LDES Client with Connector</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 2. Adapter components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/consumer/adapters/index" class="nav-list-link">2. Adapter components</a><ul class="nav-list"><li class="nav-list-item "><a href="/consumer/adapters/rdf-adapter" class="nav-list-link">RDF Adapter</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 3. Transformer components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/consumer/transformers/index" class="nav-list-link">3. Transformer components</a><ul class="nav-list"><li class="nav-list-item "><a href="/consumer/transformers/sparql-construct" class="nav-list-link">SPARQL Construct</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in 4. Output components category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/consumer/outputs/index" class="nav-list-link">4. Output components</a><ul class="nav-list"><li class="nav-list-item "><a href="/consumer/outputs/azure-blob-out" class="nav-list-link">Azure Blob Out</a></li><li class="nav-list-item "><a href="/consumer/outputs/console-out" class="nav-list-link">Console Out</a></li><li class="nav-list-item "><a href="/consumer/outputs/http-out" class="nav-list-link">HTTP Out</a></li><li class="nav-list-item "><a href="/consumer/outputs/kafka-out" class="nav-list-link">Kafka Out</a></li><li class="nav-list-item "><a href="/consumer/outputs/repository-materialiser" class="nav-list-link">Repository Materialization</a></li></ul></li><li class="nav-list-item"><a href="/consumer/ldes-discoverer" class="nav-list-link">5. LDES structure Discoverer</a></li></ul> <div class="nav-category">Intermediary Pipeline</div> <ul class="nav-list"><li class="nav-list-item"><a href="/intermediary/index" class="nav-list-link">Intermediary Pipeline</a></li></ul> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Technical Documentation" aria-label="Search Technical Documentation" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="ldes-server"> <a href="#ldes-server" class="anchor-heading" aria-labelledby="ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> LDES server </h1> <p><b>LDIO Pipeline</b> <i></i> see <a href="">reference guide</a> <br /> <b>Apache Nifi Component Name:</b> <i>``</i> see <a href="">Apache Nifi reference guide</a></p> <p>The Linked Data Event Stream (LDES) <a href="https://github.com/OpenLDES/LDESServer">server</a> is a configurable component that can be used to ingest, store, and (re-)publish one or multiple Linked Data Event Stream(s). The open-source LDES server is built in the context of the <a href="https://www.vlaanderen.be/vlaamse-smart-data-space-portaal">VSDS project</a> to exchange (Open) Data easily.</p> <p align="center"><img src="https://openldes.org/assets/assets/images/LDES%20server.png" width="60%" text-align="center" /></p> <p>The server can be configured to meet the organisation’s specific needs. Functionalities include <strong>retention policy</strong>, <strong>fragmentation</strong>, <strong>deletion</strong>, <strong>create a snapshot</strong> and <strong>pagination</strong> for managing and processing large amounts of data more efficiently and ensuring the efficient use of storage.</p> <p><img src="../images/scalableApplications.png" alt="" /></p> <p class="note">The LDES server is available as on open-source building block on <a href="https://github.com/OpenLDES/LDESServer">GitHub</a></p> <h2 id="setting-up-the-ldes-server-during-startup-process"> <a href="#setting-up-the-ldes-server-during-startup-process" class="anchor-heading" aria-labelledby="setting-up-the-ldes-server-during-startup-process"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the LDES Server during startup process </h2> <h3 id="ingesting-sources-http-in"> <a href="#ingesting-sources-http-in" class="anchor-heading" aria-labelledby="ingesting-sources-http-in"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ingesting sources (HTTP in) </h3> <p>The LDES server is able to receive data via HTTP ingestion. Specifically, the server expects a single object (member) to be sent as input via a POST request. If the dataset still contains state objects, each of these must first be converted to a version object before being ingested in the server.</p> <p>Once the objects in the dataset are LDES-compliant members (whether or not after conversion to a version object) and the LDES member has been added to the LDES server, the server can effortlessly publish the LDES member as part of the LDES.</p> <p>More information on the HTTP ingestion can be found <a href="https://openldes.github.io/LDESServer/ingest/http">here</a>.</p> <p>Example HTTP Ingest-Fetch Configuration:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">server.port</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">http-port</span> <span class="pi">}</span>
<span class="na">ldes</span><span class="pi">:</span>
  <span class="na">collection-name</span><span class="pi">:</span>
    <span class="pi">{</span>
      <span class="nv">short name of the collection</span><span class="pi">,</span>
      <span class="nv">cannot contain characters that are used for url interpretation</span><span class="pi">,</span>
      <span class="nv">e.g.’ $’</span><span class="pi">,</span>
      <span class="nv">‘=’ or ‘&amp;’</span><span class="pi">,</span>
    <span class="pi">}</span>
  <span class="na">host-name</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">hostname of LDES Server</span> <span class="pi">}</span>
  <span class="na">member-type</span><span class="pi">:</span>
    <span class="pi">{</span>
      <span class="nv">Defines which syntax type is used to define the member id e.g. “https</span><span class="pi">:</span><span class="nv">//data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder”</span><span class="pi">,</span>
    <span class="pi">}</span>
  <span class="na">timestamp-path</span><span class="pi">:</span>
    <span class="pi">{</span>
      <span class="nv">SHACL property path to the timestamp when the version object entered the event stream.</span><span class="pi">,</span>
    <span class="pi">}</span>
  <span class="na">version-of</span><span class="pi">:</span>
    <span class="pi">{</span> <span class="nv">SHACL property path to the non-versioned identifier of the entity.</span> <span class="pi">}</span>
  <span class="na">validation</span><span class="pi">:</span>
    <span class="na">shape</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">URI to defined shape</span> <span class="pi">}</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">Enables/Disables shacl validation on ingested members</span> <span class="pi">}</span>
<span class="na">rest</span><span class="pi">:</span>
  <span class="na">max-age</span><span class="pi">:</span>
    <span class="pi">{</span>
      <span class="nv">time in seconds that a mutable fragment can be considered up-to-date</span><span class="pi">,</span>
      <span class="nv">default when omitted</span><span class="pi">:</span> <span class="nv">60</span><span class="pi">,</span>
    <span class="pi">}</span>
  <span class="na">max-age-immutable</span><span class="pi">:</span>
    <span class="pi">{</span>
      <span class="nv">time in seconds that an immutable fragment should not be refreshed</span><span class="pi">,</span>
      <span class="nv">default when omitted</span><span class="pi">:</span> <span class="nv">604800</span><span class="pi">,</span>
    <span class="pi">}</span>
</code></pre></div></div> <h3 id="shacl"> <a href="#shacl" class="anchor-heading" aria-labelledby="shacl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> SHACL </h3> <p>The LDES specification prescribes that each LDES must link to a SHACL shape, providing a machine-readable definition of the members in the collection. If a SHACL shape was provided on startup, the LDES server reads it before the ingestion process starts and the SHACL shape is used to validate the ingested members. Only valid members are ingested in the LDES server. When starting the server, it is possible to provide a SHACL shape via through an RDF file. At last, the SHACL shape is also published as part of the LDES on the Web.</p> <p class="note">SHACL stands for Shapes Constraint Language and is used to define a set of constraints which are used to verify to conformity of RDF data with these constraints.</p> <p>The SHACL shape specifies the expected properties of an LDES members and the constraints that must be followed to ensure the LDES member adheres to the expected structure and semantics. It defines properties such as required properties, allowed property values, and the data types expected for the properties.</p> <p>More information on how to provide an RDF file, containing a SHACL shape, to the LDES server can be found <a href="https://github.com/OpenLDES/LDESServer#example-serving-static-content">here</a>.</p> <h3 id="fragmentation"> <a href="#fragmentation" class="anchor-heading" aria-labelledby="fragmentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Fragmentation </h3> <p>To reduce the volume of data that consumers need to replicate or to speed up certain queries, the LDES server can be configured to create several fragmentations. Fragmentations are similar to indexes in databases but then published on the Web. The RDF predicate on which the fragmentation must be applied is defined through configuration.</p> <p align="center"><img src="https://openldes.org/assets/assets/images/fragmentation.png" width="60%" text-align="center" /></p> <p>The fragmenting of a Linked Data Event Stream (LDES) is a crucial technique for managing and processing large amounts of data more efficiently. There are three main methods of fragmentation: <strong>geospatial</strong>, <strong>time-based</strong>, and <strong>substring</strong> fragmentation.</p> <p><br /></p> <p><br /></p><hr /> <h4 id="partitioning"> <a href="#partitioning" class="anchor-heading" aria-labelledby="partitioning"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Partitioning </h4> <p>When applying partitioning, the LDES server will create fragments based on the order of arrival of the LDES member, and is a linear fragmentation. This fragmentation is considered the most basic and default fragmentation because it stands for the exact reason the LDES specification was created: replication and synchronising with a dataset. The members arriving on the LDES server are added to the first page, while the latest members are always included on the latest page.</p> <p>The expected parameter to apply a partioning is a <code class="language-plaintext highlighter-rouge">member limit</code>, indicating the amount of members that can be added to each page before creating a new page.</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">“pagination”</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">memberLimit</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">Mandatory</span><span class="pi">:</span> <span class="nv">member limit &gt; 0</span> <span class="pi">}</span>
</code></pre></div></div> <p><strong>Algorithm</strong></p> <ol> <li>The fragment to which the member should be added is determined. <ul> <li>The currently open fragment is retrieved from the database.</li> <li>If this fragment contains members equal to or exceeding the member limit or no fragment can be found, a new fragment is created instead.</li> </ul> </li> <li>If a new fragment is created, the following steps are taken. <ul> <li>The new fragment becomes the new open fragment and the previous fragment becomes immutable<sup>1</sup>.</li> <li>This newly created fragment and the previous fragment are then linked with each other by 2 generic relationships<sup>1</sup>.</li> <li>The pagenumber of the new fragment is determined based on the old fragment or is set to 1 in case of the first fragment.</li> </ul> </li> </ol> <p><sup>1</sup> In case of the first fragment, a previous fragment does not exist so these steps are skipped.</p> <p><img src="content/paginationAlgorithm.png" alt="" /></p> <p><strong>Example properties</strong></p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">pagination"</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">memberLimit</span><span class="pi">:</span> <span class="m">10</span>
</code></pre></div></div> <p><br /></p> <p><br /></p><hr /> <h4 id="substring-fragmentation"> <a href="#substring-fragmentation" class="anchor-heading" aria-labelledby="substring-fragmentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Substring fragmentation </h4> <p>Substring fragmentation is currently no longer supported as a fragmentation option in the LDES server.</p><hr /> <h4 id="time-based-fragmentation"> <a href="#time-based-fragmentation" class="anchor-heading" aria-labelledby="time-based-fragmentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Time-based fragmentation </h4> <p><a href="https://github.com/OpenLDES/LDESServer/tree/main/ldes-fragmentisers/ldes-fragmentisers-timebased-hierarchical">Time-based fragmentation</a> has not yet been implemented.</p> <p align="center"><img src="https://openldes.org/assets/assets/images/temporal.png" width="60%" text-align="center" /></p> <p>Example of a time-based fragmentation configuration file</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">“timebased”</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">memberLimit</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">member limit &gt; 0</span> <span class="pi">}</span>
</code></pre></div></div> <p><strong>Algorithm</strong> This fragmentiser will create an initial fragment with the current timestamp when processing a member. Members are added to the fragment until the member limit is reached. When the fragment member limit is reached, a next fragment is created with a new current timestamp.</p> <p><strong>Reasons for deprecating this fragmentiser:</strong></p> <ol> <li>This fragmentiser follows the algorithm of pagination but without the semantics.</li> <li>For a correct timebased fragmentation, members of the fragment should be checked and their value for a given property should be used to create the correct relations. This is not the case, and there is currently no demand to have this implemented.</li> </ol> <p><br /></p> <p><br /></p><hr /> <h4 id="geospatial-fragmentation"> <a href="#geospatial-fragmentation" class="anchor-heading" aria-labelledby="geospatial-fragmentation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Geospatial fragmentation </h4> <p>Consider the scenario where the address registry is published as an LDES that using partitioning. In such a case, data consumers are required to replicate the entire linear set of fragments, despite only being interested in a smaller subset of the dataset. For instance, the city of Brussels may only require addresses within its geographical region and is not interested in other addresses. However, with the partitioned LDES, they would need to iterate through all the fragments and filter the LDES members (address version objects) on the client-side. By utilising geospatial fragmentation, the data can be divided into smaller pieces (tiles) based on geographical location. This facilitates filtering on the fragment level (tiles) and allows for processing and analysis of data within specific geospatial tiles.</p> <p align="center"><img src="https://openldes.org/assets/assets/images/geospatial.png" width="60%" text-align="center" /></p> <p>The geospatial fragmentation supported by the LDES server is based on the <a href="https://wiki.openstreetmap.org/wiki/Slippy_map">“Slippy Maps” algorithm</a>. The fragmentation expects a <code class="language-plaintext highlighter-rouge">zoom level</code> parameter which is used by the algorithm to divide the “world” into tiles. The number of tiles if \(2^{2n}\) (where n = zoom level). The second expected parameter is an <code class="language-plaintext highlighter-rouge">RDF predicate</code>, indicating on which property of the LDES member the fragmentation should be applied. More information about the algorithm used to apply a geospatial fragmentation can be found <a href="https://github.com/OpenLDES/LDESServer/tree/main/ldes-fragmentisers/ldes-fragmentisers-geospatial">here</a>.</p> <p>The required configuration for this fragmentation is:</p> <ol> <li> <p>RDF predicate on which the fragmentation should be based</p> </li> <li> <p>Zoom level</p> </li> </ol> <p>Example of geospatial fragmentation configuration file</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">“geospatial”</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">maxZoomLevel</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">Required zoom level</span> <span class="pi">}</span>
  <span class="na">fragmenterProperty</span><span class="pi">:</span> <span class="pi">{</span> <span class="nv">Defines which property will be used for bucketizing</span> <span class="pi">}</span>
</code></pre></div></div> <p><strong>Algorithm</strong></p> <ol> <li>The fragmentationObjects of the member are determined <ul> <li>We filter the RDF statements where the predicate matches the <code class="language-plaintext highlighter-rouge">fragmenterProperty</code></li> <li>If an optional regex is provided through the <code class="language-plaintext highlighter-rouge">fragmenterSubjectFilter</code> property, we filter on subjects that match this regex.</li> <li>We select all the object that pass the above filters.</li> </ul> </li> <li>A bucket of tiles is created using the coordinates and provided zoomLevel. <a href="https://wiki.openstreetmap.org/wiki/Slippy_map">This is done using the Slippy Map algorithm.</a></li> <li>The tiles are iterated. The member is added to every tile, or sub-fragmentations of these tiles<sup>1</sup>. Taking into account: <ul> <li>A new fragment is created if no fragment exists for the given tile.</li> <li>There is no <code class="language-plaintext highlighter-rouge">memberLimit</code> or max size for a fragment. They do not become immutable.</li> <li>The member is added to every related fragment</li> </ul> </li> </ol> <p><sup>1</sup> If the geospatial fragmentation is not the lowest fragmentation level, the member is not added to the tile but to a subfragment on this tile. This case is included in the <a href="#when-we-have-a-timebased-sub-fragmentation-below-geospatial-fragmentation">example below</a>.</p> <p><img src="content/geospatial_algorithm.drawio.png" alt="" /></p> <p><strong>Example</strong></p> <p>Example properties:</p> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">geospatial"</span>
<span class="na">config</span><span class="pi">:</span>
  <span class="na">maxZoomLevel</span><span class="pi">:</span> <span class="m">15</span>
  <span class="na">fragmenterProperty</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://www.opengis.net/ont/geosparql#asWKT"</span>
</code></pre></div></div> <p>With following example input:</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns0:</span><span class="w"> </span><span class="nl">&lt;http://semweb.mmlab.be/ns/linkedconnections#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns1:</span><span class="w"> </span><span class="nl">&lt;http://vocab.gtfs.org/terms#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">prov:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/prov#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ns2:</span><span class="w"> </span><span class="nl">&lt;http://www.opengis.net/ont/geosparql#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">rdfs:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2000/01/rdf-schema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">geo:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2003/01/geo/wgs84_pos#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;http://njh.me/original-id#2022-09-28T17:11:28.520Z&gt;</span><span class="w">
  </span><span class="nn">dc:</span><span class="n">isVersionOf</span><span class="w"> </span><span class="nl">&lt;http://njh.me/original-id&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns0:</span><span class="n">arrivalStop</span><span class="w"> </span><span class="nl">&lt;http://example.org/stops/402161&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns0:</span><span class="n">arrivalTime</span><span class="w"> </span><span class="s">"2022-09-28T07:14:00.000Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns0:</span><span class="n">departureStop</span><span class="w"> </span><span class="nl">&lt;http://example.org/stops/402303&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns0:</span><span class="n">departureTime</span><span class="w"> </span><span class="s">"2022-09-28T07:09:00.000Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns1:</span><span class="n">dropOffType</span><span class="w"> </span><span class="nn">ns1:</span><span class="n">Regular</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns1:</span><span class="n">pickupType</span><span class="w"> </span><span class="nn">ns1:</span><span class="n">Regular</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns1:</span><span class="n">route</span><span class="w"> </span><span class="nl">&lt;http://example.org/routes/Hasselt_-_Genk&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">ns1:</span><span class="n">trip</span><span class="w"> </span><span class="nl">&lt;http://example.org/trips/Hasselt_-_Genk/Genk_-_Hasselt/20220928T0909&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="k">a</span><span class="w"> </span><span class="nn">ns0:</span><span class="n">Connection</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">prov:</span><span class="n">generatedAtTime</span><span class="w"> </span><span class="s">"2022-09-28T17:11:28.520Z"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;http://example.org/stops/402161&gt;</span><span class="w">
  </span><span class="nn">ns2:</span><span class="n">asWKT</span><span class="w"> </span><span class="s">"POINT (5.47236 50.9642)"</span><span class="p">^^</span><span class="nn">ns2:</span><span class="n">wktLiteral</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="k">a</span><span class="w"> </span><span class="nn">ns1:</span><span class="n">Stop</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">rdfs:</span><span class="n">label</span><span class="w"> </span><span class="s">"Genk Brug"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">geo:</span><span class="n">lat</span><span class="w"> </span><span class="mf">5.0</span><span class="mi">96420</span><span class="n">e+1</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">geo:</span><span class="n">long</span><span class="w"> </span><span class="mf">5.4</span><span class="mi">72360</span><span class="n">e+0</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;http://example.org/stops/402303&gt;</span><span class="w">
  </span><span class="nn">ns2:</span><span class="n">asWKT</span><span class="w"> </span><span class="s">"POINT (5.49661 50.9667)"</span><span class="p">^^</span><span class="nn">ns2:</span><span class="n">wktLiteral</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="k">a</span><span class="w"> </span><span class="nn">ns1:</span><span class="n">Stop</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">rdfs:</span><span class="n">label</span><span class="w"> </span><span class="s">"Genk Station perron 11"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">geo:</span><span class="n">lat</span><span class="w"> </span><span class="mf">5.0</span><span class="mi">96670</span><span class="n">e+1</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">geo:</span><span class="n">long</span><span class="w"> </span><span class="mf">5.4</span><span class="mi">96610</span><span class="n">e+0</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p>The selected objects would be</p> <p><code class="language-plaintext highlighter-rouge">"POINT (5.47236 50.9642)"^^ns2:wktLiteral</code> and <code class="language-plaintext highlighter-rouge">"POINT (5.49661 50.9667)"^^ns2:wktLiteral</code></p> <p>When we convert these <a href="https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Lon..2Flat._to_tile_numbers_2">coordinates to tiles</a>, the bucket of tiles would be:</p> <ul> <li>“15/16884/10974”</li> <li>“15/16882/10975”</li> </ul> <p><ins>When geospatial fragmentation is the lowest level</ins></p> <p>After ingestion the member will be part of the following two fragments</p> <ul> <li>http://localhost:8080/addresses/by-zone?tile=15/16884/10974</li> <li>http://localhost:8080/addresses/by-zone?tile=15/16882/10975</li> </ul> <p><ins>When we have a timebased sub-fragmentation below geospatial fragmentation</ins></p> <p>After ingestion the member will be part of the following two fragments</p> <ul> <li>http://localhost:8080/addresses/by-zone-and-time?tile=15/16884/10974&amp;generatedAtTime=2023-02-15T10:14:28.262Z</li> <li>http://localhost:8080/addresses/by-zone-and-time?tile=15/16882/10975&amp;generatedAtTime=2023-02-15T10:14:28.262Z</li> </ul> <p>Note that the <code class="language-plaintext highlighter-rouge">generatedAtTime=2023-02-15T10:14:28.262Z</code> is an example, this can be any other fragmentation.</p> <p><br /></p> <p><br /></p><hr /> <h4 id="combining-geospatial-fragmentation-and-partioning"> <a href="#combining-geospatial-fragmentation-and-partioning" class="anchor-heading" aria-labelledby="combining-geospatial-fragmentation-and-partioning"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Combining geospatial fragmentation and partioning </h4> <p>The LDES server typically adds an LDES member to the “lowest” possible fragment, which in the case of geospatial fragmentation, would be the fragment representing the corresponding geospatial tile. However, some fragments/tiles may have many members, while others may have none. In the worst-case scenario, all members may be added to one geospatial tile/fragment, leading to an enormous fragment. Combining geospatial fragmentation with partitioning can be a useful approach to mitigate this issue. Then partitioning is applied within every geospatial tile, resulting in a set of linear fragments for every geospatial tile. Doing so, all members can still end up in the same geospatial tile, but now clients have a set of linear fragments to iterate through instead of one enormous fragment. More detailed information is available in the <a href="#when-we-have-a-timebased-sub-fragmentation-below-geospatial-fragmentation">example below</a>.</p> <p><img src="content/geospatial_algorithm.drawio.png" alt="" /></p> <!-- #### Example → TODO: create more easy example (e.g. Addresses) --><hr /> <h3 id="retention-policy"> <a href="#retention-policy" class="anchor-heading" aria-labelledby="retention-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Retention policy </h3> <p>A retention policydetermines how long data will be kept and stored. Its purpose is to ensure the efficient use of storage resources by controlling data growth over time. Setting a retention policy per view to minimise storage fill-up is possible.</p> <p align="center"><img src="https://openldes.org/assets/assets/images/retention_policy.png" width="60%" text-align="center" /></p> <p>Implementing a retention policy helps organisations maintain control over their data growth and ensure that storage resources are used optimally. The policy specifies the maximum duration that data should be kept.</p> <p><img src="./image.png" alt="Alt text" /></p> <h4 id="time-based-retention-policy"> <a href="#time-based-retention-policy" class="anchor-heading" aria-labelledby="time-based-retention-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Time based retention policy </h4> <p>The time-based retention policy can be configured using the <a href="https://tc39.es/proposal-temporal/docs/duration.html">ISO 8601</a> duration format. This time-based policy ensures that data is automatically deleted after a specified period, freeing up valuable storage space for new data.</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/mobility-hindrances/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">server:</span><span class="n">time-based-retention</span><span class="w"> </span><span class="nn">tree:</span><span class="n">viewDescription</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">DurationAgoPolicy</span><span class="w">  </span><span class="p">;</span><span class="w">
        </span><span class="nn">tree:</span><span class="n">value</span><span class="w"> </span><span class="s">"PT5M"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">duration</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p>duration: “PT5M”</p> <p>As an example, the time-based retention configuration example above is set up to ensure that data is automatically deleted after 5 minutes (PT5M).</p> <h4 id="point-in-time-retention-policy"> <a href="#point-in-time-retention-policy" class="anchor-heading" aria-labelledby="point-in-time-retention-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Point-in-time retention policy </h4> <p>The point in time retention policy of the Linked Data Event Stream (LDES) only preserves the members created after a specific moment. In this way, only the members made after a given point in time retain.</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/mobility-hindrances/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">server:</span><span class="n">point-in-time-retention</span><span class="w"> </span><span class="nn">tree:</span><span class="n">viewDescription</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">PointInTimePolicy</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">ldes:</span><span class="n">pointInTime</span><span class="w"> </span><span class="s">"2023-04-12T00:00:00"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">dateTime
</span><span class="w">    </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h4 id="version-based-retention-policy"> <a href="#version-based-retention-policy" class="anchor-heading" aria-labelledby="version-based-retention-policy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Version-based retention policy </h4> <p>The version-based retention policy of the system ensures that only the x most recent members of each state object are retained. In this way, only the x most recent members of each state object retain.</p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/mobility-hindrances/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">server:</span><span class="n">version-based-retention</span><span class="w"> </span><span class="nn">tree:</span><span class="n">viewDescription</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">LatestVersionSubset</span><span class="p">;</span><span class="w">
        </span><span class="nn">ldes:</span><span class="n">amount</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h3 id="combine-retention-policies"> <a href="#combine-retention-policies" class="anchor-heading" aria-labelledby="combine-retention-policies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Combine retention policies </h3> <h4 id="time-based-and-point-in-time-retention"> <a href="#time-based-and-point-in-time-retention" class="anchor-heading" aria-labelledby="time-based-and-point-in-time-retention"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Time based and Point-in-time retention </h4> <p>The integration of Time-based and Point-in-Time retention strategies offers a tactical method for organizations aiming to restrict data volume from a certain Point in Time within a specified time frame.</p> <p align="left"><img src="image-2.png" width="50%" text-align="center" /></p> <p align="center"><img src="image-3.png" width="50%" text-align="center" /></p> <p align="right"><img src="image-4.png" width="50%" text-align="center" /></p> <h4 id="time-based-and-version-based-retention"> <a href="#time-based-and-version-based-retention" class="anchor-heading" aria-labelledby="time-based-and-version-based-retention"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Time-based and Version-based retention </h4> <p>This can be used, when the focus is on datasets that are primarily relevant in their ‘latest state’. A practical example is a dataset like a view of an address registry, where only the latest, updated addresses are pertinent. Such datasets require a dynamic approach to data retention.</p> <p>Version-based retention: to retain only the most recent version of a data item. Time-based retention: to maintain changes within a specific time frame.</p> <p>Data users can retrieve and maintain the full state of the data, regardless of when they access the data stream, all clients have the same information, leading to uniformity and consistency in data analysis. On the other hand, for data publishers; there’s no need to store all historical data. Only the most recent state plus a short history (e.g., two days) is retained. This approach results in datasets that do not grow exponentially, simplifying management and accessibility.</p> <p>The combination of Version-based and Time-based Retention offers an advanced solution for managing dynamic datasets. This approach is particularly suited for scenarios where only the latest data is relevant, while still retaining a limited historical context. It achieves an optimal balance between accessibility, consistency, and efficiency in both data storage and usage.</p> <h3 id="hosting-the-ldes-stream-shacl-shape"> <a href="#hosting-the-ldes-stream-shacl-shape" class="anchor-heading" aria-labelledby="hosting-the-ldes-stream-shacl-shape"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hosting the LDES stream SHACL shape </h3> <p>SHACL (Shapes Constraint Language) is a language used to validate RDF graphs against a set of conditions provided as shapes and other constructs in an RDF graph. The LDES Server facilitates hosting a SHACL shape describing the members in the LDES. Through configuration, it is possible to <a href="https://github.com/OpenLDES/LDESServer#example-http-ingest-fetch-configuration">reference an existing SHACL shape</a> via an URL or to provide a <a href="https://github.com/OpenLDES/LDESServer#example-serving-static-content">static file</a> with an RDF description of the SHACL shape.</p> <h3 id="hosting-dcat-metadata"> <a href="#hosting-dcat-metadata" class="anchor-heading" aria-labelledby="hosting-dcat-metadata"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hosting DCAT metadata </h3> <p>DCAT is a standardised RDF vocabulary to describe data catalogues on the Web, allowing easy interoperability between catalogues. Using a standard schema, DCAT enhances discoverability and facilitates federated search across multiple catalogues.</p> <p>The LDES server facilitates hosting DCAT metadata when publishing an LDES. Through configuration, as with the SHACL shape, it is possible to reference an existing DCAT via an URI or to provide a static file containing an RDF description of the DCAT. More information on configuring DCAT on the LDES Server can be found <a href="https://github.com/OpenLDES/LDESServer#example-serving-dcat-metadata">here</a>.</p> <h4 id="add-dcat-configuration-for-the-ldes-server"> <a href="#add-dcat-configuration-for-the-ldes-server" class="anchor-heading" aria-labelledby="add-dcat-configuration-for-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add DCAT configuration for the LDES server </h4> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dct:</span><span class="w">   </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcat:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/ns/dcat#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="p">[]</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">dcat:</span><span class="n">Catalog</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">title</span><span class="w"> </span><span class="s">"My LDES'es"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">description</span><span class="w"> </span><span class="s">"All LDES'es from publiser X"</span><span class="na">@en</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h4 id="add-dcat-metadata-for-a-ldes"> <a href="#add-dcat-metadata-for-a-ldes" class="anchor-heading" aria-labelledby="add-dcat-metadata-for-a-ldes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Add DCAT metadata for a LDES </h4> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcat:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/dcat#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="p">[]</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">dcat:</span><span class="n">Dataset</span><span class="w"> </span><span class="p">;</span><span class="w">
   </span><span class="nn">dc:</span><span class="n">title</span><span class="w"> </span><span class="s">"My LDES"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
   </span><span class="nn">dc:</span><span class="n">description</span><span class="w"> </span><span class="s">"LDES for my data collection"</span><span class="na">@en</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <h2 id="setting-up-the-ldes-server-using-api"> <a href="#setting-up-the-ldes-server-using-api" class="anchor-heading" aria-labelledby="setting-up-the-ldes-server-using-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the LDES Server using API </h2> <h3 id="setup-of-the-ldes-server"> <a href="#setup-of-the-ldes-server" class="anchor-heading" aria-labelledby="setup-of-the-ldes-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup of the LDES Server </h3> <p>To start a default LDES Server, a few basic steps are needed.</p> <ul> <li>Create a <code class="language-plaintext highlighter-rouge">ldes-server.yml</code> config file with this basic content</li> </ul> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mongock</span><span class="pi">:</span>
  <span class="na">migration-scan-package</span><span class="pi">:</span> <span class="s">VSDS</span>
<span class="na">springdoc</span><span class="pi">:</span>
  <span class="na">swagger-ui</span><span class="pi">:</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/v1/swagger</span>
<span class="na">ldes-server</span><span class="pi">:</span>
  <span class="na">host-name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://localhost:8080"</span>
<span class="na">management</span><span class="pi">:</span>
  <span class="na">tracing</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>
<span class="na">spring</span><span class="pi">:</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="na">mongodb</span><span class="pi">:</span>
      <span class="na">database</span><span class="pi">:</span> <span class="s">ldes</span>
      <span class="na">host</span><span class="pi">:</span> <span class="s">ldes-mongodb</span>
      <span class="na">port</span><span class="pi">:</span> <span class="m">27017</span>
      <span class="na">auto-index-creation</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div> <ul> <li>Create a local <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file with the content below.</li> </ul> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">3.3"</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">ldes-server</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">basic_ldes-server</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">ghcr.io/informatievlaanderen/ldes-server:20230602200451</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">SPRING_CONFIG_LOCATION=/config/</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./ldes-server.yml:/config/application.yml:ro</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes-mongodb</span>
  <span class="na">ldes-mongodb</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">quick_start_ldes-mongodb</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">mongo:6.0.4</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">27017:27017</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ldes</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">ldes</span><span class="pi">:</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">quick_start_network</span>
</code></pre></div></div> <ul> <li>Run <code class="language-plaintext highlighter-rouge">docker compose up</code> within the work directory of <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> file to start the containers.</li> </ul> <h4 id="setting-up-metadata-for-the-server"> <a href="#setting-up-metadata-for-the-server" class="anchor-heading" aria-labelledby="setting-up-metadata-for-the-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up metadata for the server </h4> <p>Setting up metadata for your LDES Server can be done by posting a RDF object defining a DCAT catalog to <code class="language-plaintext highlighter-rouge">/admin/api/v1/dcat</code></p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dct:</span><span class="w">   </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcat:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/ns/dcat#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">foaf:</span><span class="w">  </span><span class="nl">&lt;http://xmlns.com/foaf/0.1/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">org:</span><span class="w">   </span><span class="nl">&lt;http://www.w3.org/ns/org#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">legal:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/legal#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">m8g:</span><span class="w">   </span><span class="nl">&lt;http://data.europa.eu/m8g/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">locn:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/ns/locn#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="p">[]</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">dcat:</span><span class="n">Catalog</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">title</span><span class="w"> </span><span class="s">"My LDES'es"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">description</span><span class="w"> </span><span class="s">"All LDES'es from publiser X"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">publisher</span><span class="w"> </span><span class="nl">&lt;http://sample.org/company/PublisherX&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;http://sample.org/company/PublisherX&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">legal:</span><span class="n">LegalEntity</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">foaf:</span><span class="n">name</span><span class="w"> </span><span class="s">"Data Publishing Company"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">legal:</span><span class="n">legalName</span><span class="w"> </span><span class="s">"Data Publishing Company BV"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">m8g:</span><span class="n">registeredAddress</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nn">locn:</span><span class="n">Address</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">locn:</span><span class="n">fullAddress</span><span class="w"> </span><span class="s">"Some full address here"</span><span class="w">
  </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">m8g:</span><span class="n">contactPoint</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nn">m8g:</span><span class="n">ContactPoint</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">m8g:</span><span class="n">hasEmail</span><span class="w"> </span><span class="s">"info@data-publishing-company.com"</span><span class="w">
  </span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p>This can be updated by performing a PUT operation with an updated DCAT catalog on <code class="language-plaintext highlighter-rouge">/admin/api/v1/dcat/{catalogID}</code></p> <p>Finally, to delete the catalog, a DELETE request can be performed at <code class="language-plaintext highlighter-rouge">/admin/api/v1/dcat/{catalogID}</code></p> <p class="note">Further documentation can be found on the internal Swagger API available at <code class="language-plaintext highlighter-rouge">/v1/swagger</code></p> <h3 id="setting-up-a-collection"> <a href="#setting-up-a-collection" class="anchor-heading" aria-labelledby="setting-up-a-collection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up a collection </h3> <p>Setting up a collection on the LDES Server can be done by posting a RDF object defining a collection to <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams</code></p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">custom:</span><span class="w"> </span><span class="nl">&lt;http://example.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcterms:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">sh:</span><span class="w">   </span><span class="nl">&lt;http://www.w3.org/ns/shacl#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">


</span><span class="nn">server:</span><span class="n">exampleCollection</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">EventStream</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">timestampPath</span><span class="w"> </span><span class="nn">dcterms:</span><span class="n">created</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">versionOfPath</span><span class="w"> </span><span class="nn">dcterms:</span><span class="n">isVersionOf</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">custom:</span><span class="n">memberType</span><span class="w"> </span><span class="nl">&lt;https://data.vlaanderen.be/ns/mobiliteit#Mobiliteitshinder&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">custom:</span><span class="n">hasDefaultView</span><span class="w"> </span><span class="s">"true"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">boolean</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">tree:</span><span class="n">shape</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="nn">sh:</span><span class="n">closed</span><span class="w"> </span><span class="s">"true"</span><span class="p">;</span><span class="w">
        </span><span class="k">a</span><span class="w"> </span><span class="nn">sh:</span><span class="n">NodeShape</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p>This collection can be deleted by performing a DELETE request on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}</code></p> <p class="note">Further documentation can be found on the internal Swagger API available at <code class="language-plaintext highlighter-rouge">/v1/swagger</code></p> <h4 id="setting-up-metadata-for-collection"> <a href="#setting-up-metadata-for-collection" class="anchor-heading" aria-labelledby="setting-up-metadata-for-collection"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up metadata for collection </h4> <p>To add metadata to an inserted collection, one can post a DCAT dataset on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/dcat</code></p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dct:</span><span class="w">   </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcat:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/ns/dcat#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">foaf:</span><span class="w">  </span><span class="nl">&lt;http://xmlns.com/foaf/0.1/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">org:</span><span class="w">   </span><span class="nl">&lt;http://www.w3.org/ns/org#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">legal:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/legal#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">m8g:</span><span class="w">   </span><span class="nl">&lt;http://data.europa.eu/m8g/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">locn:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/ns/locn#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="p">[]</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">dcat:</span><span class="n">Dataset</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">title</span><span class="w"> </span><span class="s">"My LDES"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">title</span><span class="w"> </span><span class="s">"Mijn LDES"</span><span class="na">@nl</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">description</span><span class="w"> </span><span class="s">"LDES for my data collection"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">description</span><span class="w"> </span><span class="s">"LDES vir my data-insameling"</span><span class="na">@af</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">dct:</span><span class="n">creator</span><span class="w"> </span><span class="nl">&lt;http://sample.org/company/MyDataOwner&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nl">&lt;http://sample.org/company/MyDataOwner&gt;</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">legal:</span><span class="n">LegalEntity</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">foaf:</span><span class="n">name</span><span class="w"> </span><span class="s">"Data Company"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">legal:</span><span class="n">legalName</span><span class="w"> </span><span class="s">"Data Company BV"</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">m8g:</span><span class="n">registeredAddress</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nn">locn:</span><span class="n">Address</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">locn:</span><span class="n">fullAddress</span><span class="w"> </span><span class="s">"My full address here"</span><span class="w">
  </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">m8g:</span><span class="n">contactPoint</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="k">a</span><span class="w"> </span><span class="nn">m8g:</span><span class="n">ContactPoint</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">m8g:</span><span class="n">hasEmail</span><span class="w"> </span><span class="s">"info@data-company.com"</span><span class="w">
  </span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p>To update this entry, a PUT request can be performed on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/dcat</code>.</p> <p>Similarly, a DELETE request can be performed on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/dcat</code></p> <p class="note">Further documentation can be found on the internal Swagger API available at <code class="language-plaintext highlighter-rouge">/v1/swagger</code></p> <h3 id="setting-up-a-view"> <a href="#setting-up-a-view" class="anchor-heading" aria-labelledby="setting-up-a-view"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up a view </h3> <p>Setting up a view on the LDES Server can be done by performing a POST operation with a RDF object defining a collection to <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/views</code></p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">example:</span><span class="w"> </span><span class="nl">&lt;http://example.org/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/name1/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">viewName:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/name1/view1/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">viewName:</span><span class="n">description
</span><span class="w">    </span><span class="k">a</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#ViewDescription&gt;</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">;</span><span class="w">
        </span><span class="nn">example:</span><span class="n">name</span><span class="w"> </span><span class="s">"timebased"</span><span class="p">;</span><span class="w">
        </span><span class="nn">example:</span><span class="n">duration</span><span class="w"> </span><span class="s">"10"</span><span class="w"> </span><span class="p">;</span><span class="w">
    </span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">server:</span><span class="n">view1
</span><span class="w">        </span><span class="nl">&lt;https://w3id.org/tree#viewDescription&gt;</span><span class="w">
                </span><span class="nl">&lt;http://localhost:8080/name1/view1/description&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span></code></pre></div></div> <p class="note">Further documentation can be found on the internal Swagger API available at <code class="language-plaintext highlighter-rouge">/v1/swagger</code></p> <h4 id="setting-up-metadata-for-view"> <a href="#setting-up-metadata-for-view" class="anchor-heading" aria-labelledby="setting-up-metadata-for-view"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up metadata for view </h4> <p>To add metadata to an inserted view, one can perform a PUT operation with a DCAT view description and dataservice on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat</code></p> <div class="language-turtle highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">@prefix</span><span class="w"> </span><span class="nn">ldes:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/ldes#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">tree:</span><span class="w"> </span><span class="nl">&lt;https://w3id.org/tree#&gt;</span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dc:</span><span class="w"> </span><span class="nl">&lt;http://purl.org/dc/terms/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">host:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">server:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/collection/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">viewName:</span><span class="w"> </span><span class="nl">&lt;http://localhost:8080/collection/viewName/&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">dcat:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/ns/dcat#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">skos:</span><span class="w"> </span><span class="nl">&lt;http://www.w3.org/2004/02/skos/core#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">
</span><span class="kd">@prefix</span><span class="w"> </span><span class="nn">xsd:</span><span class="w">  </span><span class="nl">&lt;http://www.w3.org/2001/XMLSchema#&gt;</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">server:</span><span class="n">viewName</span><span class="w"> </span><span class="k">a</span><span class="w"> </span><span class="nn">tree:</span><span class="n">Node</span><span class="w"> </span><span class="p">;</span><span class="w">
  </span><span class="nn">tree:</span><span class="n">viewDescription</span><span class="w"> </span><span class="nn">viewName:</span><span class="n">description</span><span class="w"> </span><span class="p">.</span><span class="w">

</span><span class="nn">viewName:</span><span class="n">description
</span><span class="w">     </span><span class="k">a</span><span class="w">       </span><span class="nn">dcat:</span><span class="n">DataService</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nn">tree:</span><span class="n">ViewDescription</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">tree:</span><span class="n">fragmentationStrategy
</span><span class="w">             </span><span class="p">([</span><span class="w"> </span><span class="k">a</span><span class="w">  </span><span class="nn">tree:</span><span class="n">ExampleFragmentation</span><span class="w"> </span><span class="p">;</span><span class="w">
               </span><span class="nn">tree:</span><span class="n">pageSize</span><span class="w">  </span><span class="s">"100"</span><span class="w"> </span><span class="p">;</span><span class="w">
               </span><span class="nn">tree:</span><span class="n">property</span><span class="w">  </span><span class="s">"example/property"</span><span class="w">
             </span><span class="p">])</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">dc:</span><span class="n">description</span><span class="w"> </span><span class="s">"Geospatial fragmentation for my LDES"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">dc:</span><span class="n">title</span><span class="w"> </span><span class="s">"My geo-spatial view"</span><span class="na">@en</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">dc:</span><span class="n">license
</span><span class="w">             </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">  </span><span class="nn">dc:</span><span class="n">LicenseDocument</span><span class="w"> </span><span class="p">;</span><span class="w">
               </span><span class="nn">dc:</span><span class="n">type
</span><span class="w">                 </span><span class="p">[</span><span class="w"> </span><span class="k">a</span><span class="w">       </span><span class="nn">skos:</span><span class="n">Concept</span><span class="w"> </span><span class="p">;</span><span class="w">
                   </span><span class="nn">skos:</span><span class="n">prefLabel</span><span class="w"> </span><span class="s">"some public license"</span><span class="na">@en</span><span class="w">
                 </span><span class="p">]</span><span class="w">
             </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">ldes:</span><span class="n">retentionPolicy</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="k">a</span><span class="w"> </span><span class="nn">ldes:</span><span class="n">DurationAgoPolicy</span><span class="w">  </span><span class="p">;</span><span class="w">
         </span><span class="nn">tree:</span><span class="n">value</span><span class="w"> </span><span class="s">"PT2M"</span><span class="p">^^</span><span class="nn">xsd:</span><span class="n">duration</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="p">]</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">dcat:</span><span class="n">endpointURL</span><span class="w"> </span><span class="nn">server:</span><span class="n">viewName</span><span class="w"> </span><span class="p">;</span><span class="w">
     </span><span class="nn">dcat:</span><span class="n">servesDataset</span><span class="w"> </span><span class="nn">host:</span><span class="n">collection</span><span class="w"> </span><span class="p">;</span><span class="w">
</span></code></pre></div></div> <p>Similarly, a DELETE request can be performed on <code class="language-plaintext highlighter-rouge">/admin/api/v1/eventstreams/{collectionName}/views/{viewName}/dcat</code></p> <p class="note">Further documentation can be found on the internal Swagger API available at <code class="language-plaintext highlighter-rouge">/v1/swagger</code></p> <h3 id="setting-up-acmidm"> <a href="#setting-up-acmidm" class="anchor-heading" aria-labelledby="setting-up-acmidm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up ACM/IDM </h3> <p>The Access and User Management (ACM) and Identity Management (IDM) of the Flemish government are products that allow you to manage the access and identity of data users that consume the published LDES.</p> <p>This ADM/IDM security option through an API gateway, protects LDES Collections and Views from unauthorized access, recognizing the importance of data security. The API gateway serves as a security layer, managing access and applying authentication methods, such as ACM/IDM, reducing the chance of exposing sensitive data to unwanted parties.</p> <p>ACM/IDM verifies the identity and permissions of users and devices. This improved security feature increases the trust and dependability of LDES Server for organizations working in security-sensitive environments.</p> <p>During the ACM/IDM Standard integration process, you will work alongside the ACM/IDM integration team of the Flemish government to follow the standard connection procedure. One of our analysts will guide you through this process via an integration file, where agreements and requirements are documented. This procedure is followed for both new files and modifications to existing files.</p> <p>You can find <a href="https://www.vlaanderen.be/acm-idm-standaard-aansluitingsproces">here</a> more information.</p> <h3 id="openapi-swagger-ui"> <a href="#openapi-swagger-ui" class="anchor-heading" aria-labelledby="openapi-swagger-ui"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> OpenAPI swagger UI </h3> <p>Via the OpenAPI Specification it becomes possible discover how the LDES server API works, how to configure the LDES server, etc., in a user-friendly manner.</p> <p>As an example, the Swagger API docs can be find <a href="https://onboarding1.smartdataspace.beta-vlaanderen.be/v1/swagger-ui/index.html">here</a>. The Swagger API should look like this:</p> <div id="swagger-ui"></div> <script src="/swagger-ui/swagger-ui-bundle.js" charset="UTF-8"> </script> <script src="/swagger-ui//swagger-ui-standalone-preset.js" charset="UTF-8"> </script> <script src="/swagger-ui/swagger-initializer.js" charset="UTF-8"> </script> <link rel="stylesheet" type="text/css" href="/swagger-ui/swagger-ui.css" /> <link rel="stylesheet" type="text/css" href="/swagger-ui/index.css" /> <script type="text/javascript" async="" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"> </script> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"></p> <div class="d-flex mt-2"> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.3/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
